var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}}()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Suspend_1=require("./script/Suspend"),Assembly_1=require("./script/Assembly"),Role_1=require("./script/Role"),OperationControl_1=require("./script/OperationControl"),MainSceneControl_1=require("./script/MainSceneControl"),Candy_1=require("./script/Candy"),Candy_Explode_1=require("./script/Candy_Explode"),Enemy_1=require("./script/Enemy"),EnemyBullet_1=require("./script/EnemyBullet"),Explode_1=require("./script/Explode"),HintWord_1=require("./script/HintWord"),Ranking_1=require("./script/Ranking"),Resurgence_1=require("./script/Resurgence"),RewardWords_1=require("./script/RewardWords"),RoleBullet_1=require("./script/RoleBullet"),Settlement_1=require("./script/Settlement"),StartGame_1=require("./script/StartGame"),GameConfig=function(){function GameConfig(){}return GameConfig.init=function(){var reg=Laya.ClassUtils.regClass;reg("script/Suspend.ts",Suspend_1.default),reg("script/Assembly.ts",Assembly_1.default),reg("script/Role.ts",Role_1.default),reg("script/OperationControl.ts",OperationControl_1.default),reg("script/MainSceneControl.ts",MainSceneControl_1.default),reg("script/Candy.ts",Candy_1.default),reg("script/Candy_Explode.ts",Candy_Explode_1.default),reg("script/Enemy.ts",Enemy_1.default),reg("script/EnemyBullet.ts",EnemyBullet_1.default),reg("script/Explode.ts",Explode_1.default),reg("script/HintWord.ts",HintWord_1.default),reg("script/Ranking.ts",Ranking_1.default),reg("script/Resurgence.ts",Resurgence_1.default),reg("script/RewardWords.ts",RewardWords_1.default),reg("script/RoleBullet.ts",RoleBullet_1.default),reg("script/Settlement.ts",Settlement_1.default),reg("script/StartGame.ts",StartGame_1.default)},GameConfig.width=750,GameConfig.height=1334,GameConfig.scaleMode="fixedwidth",GameConfig.screenMode="vertical",GameConfig.alignV="top",GameConfig.alignH="center",GameConfig.startScene="scene/MainScene.scene",GameConfig.sceneRoot="",GameConfig.debug=!1,GameConfig.stat=!0,GameConfig.physicsDebug=!0,GameConfig.exportSceneToJson=!0,GameConfig}();exports.default=GameConfig,GameConfig.init()},{"./script/Assembly":3,"./script/Candy":4,"./script/Candy_Explode":5,"./script/Enemy":6,"./script/EnemyBullet":7,"./script/Explode":8,"./script/HintWord":9,"./script/MainSceneControl":10,"./script/OperationControl":11,"./script/Ranking":12,"./script/Resurgence":13,"./script/RewardWords":14,"./script/Role":15,"./script/RoleBullet":16,"./script/Settlement":17,"./script/StartGame":18,"./script/Suspend":19}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var GameConfig_1=require("./GameConfig");new(function(){function Main(){window.Laya3D?Laya3D.init(GameConfig_1.default.width,GameConfig_1.default.height):Laya.init(GameConfig_1.default.width,GameConfig_1.default.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=GameConfig_1.default.scaleMode,Laya.stage.screenMode=GameConfig_1.default.screenMode,Laya.URL.exportSceneToJson=GameConfig_1.default.exportSceneToJson,(GameConfig_1.default.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),GameConfig_1.default.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),GameConfig_1.default.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return Main.prototype.onVersionLoaded=function(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))},Main.prototype.onConfigLoaded=function(){GameConfig_1.default.startScene&&Laya.Scene.open(GameConfig_1.default.startScene)},Main}())},{"./GameConfig":1}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Assembly=function(_super){function Assembly(){return _super.call(this)||this}return __extends(Assembly,_super),Assembly.prototype.onEnable=function(){this.initProperty()},Assembly.prototype.initProperty=function(){this.self=this.owner,this.selfScene=this.self.scene,this.smokeSwitch=!0,this.smokeTime=Date.now(),this.smokeInterval=500,this.initialPX_Machine=this.machine.x,this.self.Assembly=this,this.lamp_01=this.energyLamp_01.getChildByName("lamp_01"),this.lamp_02=this.energyLamp_01.getChildByName("lamp_02"),this.lamp_03=this.energyLamp_01.getChildByName("lamp_03"),this.lamp_01.alpha=.3,this.lamp_02.alpha=.3,this.lamp_03.alpha=.3,this.lamp_04=this.energyLamp_02.getChildByName("lamp_04"),this.lamp_05=this.energyLamp_02.getChildByName("lamp_05"),this.lamp_06=this.energyLamp_02.getChildByName("lamp_06"),this.lamp_04.alpha=.3,this.lamp_05.alpha=.3,this.lamp_06.alpha=.3,this.LampSwitch=!0,this.lampTime=Date.now(),this.lampInterval=1600,this.lampAni_01(),this.lampAni_02(),this.mDirection=2*Math.random()==1?"left":"right",this.mshakeInterval=30,this.mshakeTime=Date.now(),this.mshakesTre=1,this.mshakeSwitch=!0,this.rshakeInterval=30,this.rshakeTime=Date.now(),this.rshakesTre=2,this.rDirection=2*Math.random()==1?"left":"right",this.rshakeSwitch=!0,this.timer=this.owner.getChildByName("timer"),this.timeSchedule=this.timer.getChildByName("timeSchedule"),this.timerShakeNum=0,this.pipeSk_01=this.machine.getChildByName("pipeline_01"),this.pipeSk_02=this.machine.getChildByName("pipeline_02"),this.createPipeSk(),this.pipeSwitch=!1,this.pipeTime=Date.now(),this.pipeIntervel=2500},Assembly.prototype.createPipeSk=function(){this.pipeSk_01Tem=new Laya.Templet,this.pipeSk_01Tem.on(Laya.Event.COMPLETE,this,this.parseComplete_01),this.pipeSk_01Tem.on(Laya.Event.ERROR,this,this.onError),this.pipeSk_01Tem.loadAni("candy/糖果机器/pipeline_01.sk"),this.pipeSk_02Tem=new Laya.Templet,this.pipeSk_02Tem.on(Laya.Event.COMPLETE,this,this.parseComplete_02),this.pipeSk_02Tem.on(Laya.Event.ERROR,this,this.onError),this.pipeSk_02Tem.loadAni("candy/糖果机器/pipeline_01.sk")},Assembly.prototype.onError=function(){console.log("骨骼动画加载错误")},Assembly.prototype.parseComplete_01=function(){this.pipeSk_01.play("static",!0)},Assembly.prototype.parseComplete_02=function(){this.pipeSk_02.play("static",!0)},Assembly.prototype.pipeAnimation=function(type){"static"===type?(this.pipeSk_01.play("static",!0),this.pipeSk_02.play("static",!0)):"flow"===type&&(this.pipeSk_01.play("flow",!0),this.pipeSk_02.play("flow",!0))},Assembly.prototype.lampAni_01=function(){Laya.Tween.to(this.lamp_01,{alpha:1},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.lamp_01,{alpha:.3},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.lamp_02,{alpha:1},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.lamp_02,{alpha:.3},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.lamp_03,{alpha:1},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.lamp_03,{alpha:.3},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0)},[]),0)},[]),0)},[]),0)},Assembly.prototype.lampAni_02=function(){Laya.Tween.to(this.lamp_04,{alpha:1},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.lamp_04,{alpha:.3},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.lamp_05,{alpha:1},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.lamp_05,{alpha:.3},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.lamp_06,{alpha:1},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.lamp_06,{alpha:.3},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0)},[]),0)},[]),0)},[]),0)},Assembly.prototype.moveShake=function(target){if(this.mshakeSwitch){var nowTime=Date.now();if(nowTime-this.mshakeTime>this.mshakeInterval){this.mshakeTime=nowTime;var initialPX=void 0;target===this.machine&&(initialPX=this.initialPX_Machine);this.mshakesTre;"left"===this.mDirection?(target.x-=this.mshakesTre,this.machine.x<initialPX&&(this.mDirection="right")):"right"===this.mDirection&&(target.x+=this.mshakesTre,this.machine.x>initialPX&&(this.mDirection="left"))}}},Assembly.prototype.timerShake=function(){if(this.timeSchedule.value>0&&this.timeSchedule.value<=.15?(this.rshakeInterval=40,this.rshakesTre=2):this.timeSchedule.value>.15&&this.timeSchedule.value<=.4?(this.rshakeInterval=50,this.rshakesTre=1.5):this.timeSchedule.value>.4&&this.timeSchedule.value<=.7?(this.rshakeInterval=60,this.rshakesTre=1):(this.timeSchedule.value>.7&&this.timeSchedule.value,this.rshakeInterval=70,this.rshakesTre=.5),this.rshakeSwitch){var nowTime=Date.now();nowTime-this.rshakeTime>this.rshakeInterval&&(this.rshakeTime=nowTime,"left"===this.rDirection?(this.timer.rotation=-this.rshakesTre,this.timer.rotation<0&&(this.rDirection="right")):"right"===this.rDirection&&(this.timer.rotation=this.rshakesTre,this.timer.rotation>0&&(this.rDirection="left")))}},Assembly.prototype.onUpdate=function(){if(!this.selfScene.MainSceneControl.gameOver){if(this.smokeSwitch){var nowTime=Date.now();if(nowTime-this.smokeTime>this.smokeInterval){this.smokeTime=nowTime;var random=Math.floor(300*Math.random())+100;this.smokeInterval=600-random,this.selfScene.MainSceneControl.explodeAni(this.machine,650,190,"smokeEffects",1,10)}}var time;if(this.LongPointer.rotation+=10,this.moveShake(this.machine),this.timerShake(),this.LampSwitch)(time=Date.now())-this.lampTime>this.lampInterval&&(this.lampTime=time,this.lampAni_01(),this.lampAni_02());if(this.pipeSwitch)(time=Date.now())-this.pipeTime>this.pipeIntervel&&(this.pipeTime=time,this.pipeSk_01.play("flow",!1),this.pipeSk_02.play("flow",!1))}},Assembly.prototype.onDisable=function(){},Assembly}(Laya.Script);exports.default=Assembly},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MainSceneControl_1=require("./MainSceneControl"),Candy=function(_super){function Candy(){return _super.call(this)||this}return __extends(Candy,_super),Candy.prototype.onEnable=function(){this.initProperty()},Candy.prototype.initProperty=function(){this.self=this.owner,this.selfScene=this.self.scene,this.candyTagRole=null,this.mainSceneControl=this.selfScene.getComponent(MainSceneControl_1.default),this.roleParent=this.mainSceneControl.roleParent,this.scoreLabel=this.mainSceneControl.scoreLabel,this.selfSpeed=10,this.timerControl=0,this.spaceY=5,this.hintWord=this.mainSceneControl.hintWord,this.selected=!1,this.group=null,this.skeleton=this.self.getChildByName("skeleton"),this.self.Candy=this,this.createBoneAni()},Candy.prototype.createBoneAni=function(){this.templet=new Laya.Templet,this.templet.on(Laya.Event.COMPLETE,this,this.parseComplete),this.templet.on(Laya.Event.ERROR,this,this.onError),this.templet.loadAni("candy/糖果/candyCompilations.sk")},Candy.prototype.onError=function(){console.log("骨骼动画加载错误！")},Candy.prototype.parseComplete=function(){this.playSkeletonAni(2,"turnDown")},Candy.prototype.playSkeletonAni=function(speed,type){switch(this.self.name.substring(0,11)){case"yellowCandy":this.skeleton.play("yellow_"+type,!0);break;case"redCandy___":this.skeleton.play("red_"+type,!0);break;case"blueCandy__":this.skeleton.play("blue_"+type,!0);break;case"greenCandy_":this.skeleton.play("green_"+type,!0)}this.skeleton.x=this.self.width/2+3,this.skeleton.y=this.self.height/2,this.skeleton.playbackRate(speed)},Candy.prototype.candyFlyToRole=function(){if(null!==this.candyTagRole){this.playSkeletonAni(2,"turnDown");var targetX,HalfX,timePar=500+100*this.group;this.candyTagRole.y;targetX=this.candyTagRole.x-50;HalfX=this.self.x>Laya.stage.width/2?this.self.x+3*(this.candyTagRole.x-this.self.x)/5:this.self.x-3*(this.self.x-this.candyTagRole.x)/5;var HalfY=this.self.y+(this.candyTagRole.y-this.self.y)/4;Laya.Tween.to(this.self,{x:HalfX,y:HalfY,scaleX:1.5,scaleY:1.5},3*timePar/4,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{x:targetX,y:this.candyTagRole.y,scaleX:.6,scaleY:.6},timePar/2,null,Laya.Handler.create(this,function(){this.self.removeSelf(),this.hintWordMove(),this.roleAddProperty(),this.candyTagRole=null}),0)}),0);var shadow=this.self.getChildByName("shadow");Laya.Tween.to(shadow,{x:-20,y:100,scaleX:.8,scaleY:.8},3*timePar/4,null,Laya.Handler.create(this,function(){Laya.Tween.to(shadow,{x:-10,y:60,scaleX:.7,scaleY:.7},timePar,null,Laya.Handler.create(this,function(){}),0)}),0)}},Candy.prototype.hintWordMove=function(){var MainSceneControl=this.selfScene.MainSceneControl;switch(this.self.name.substring(0,11)){case"yellowCandy":MainSceneControl.createHintWord(this.candyTagRole,"攻击里",10);break;case"redCandy___":MainSceneControl.createHintWord(this.candyTagRole,"生命",5);break;case"blueCandy__":MainSceneControl.createHintWord(this.candyTagRole,"公鸡速度",10);break;case"greenCandy_":MainSceneControl.createHintWord(this.candyTagRole,"防御力",5)}},Candy.prototype.roleAddProperty=function(){switch(this.self.name=this.self.name.substring(0,11),this.self.name){case"yellowCandy":this.candyTagRole.Role.role_property.attackValue+=10;break;case"redCandy___":this.candyTagRole.Role.role_property.blood+=5;break;case"blueCandy__":this.candyTagRole.Role.role_property.attackSpeed+=10;break;case"greenCandy_":this.candyTagRole.Role.role_property.defense+=5}},Candy.prototype.onUpdate=function(){},Candy.prototype.onDisable=function(){this.skeleton&&this.skeleton.removeSelf(),Laya.Tween.clearAll(this),"yellowCandy"===this.self.name?Laya.Pool.recover("yellowCandy",this.self):"redCandy___"===this.self.name?Laya.Pool.recover("redCandy___",this.self):"blueCandy__"===this.self.name?Laya.Pool.recover("blueCandy__",this.self):"greenCandy_"===this.self.name&&Laya.Pool.recover("greenCandy_",this.self)},Candy}(Laya.Script);exports.default=Candy},{"./MainSceneControl":10}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Candy=function(_super){function Candy(){return _super.call(this)||this}return __extends(Candy,_super),Candy.prototype.onEnable=function(){this.initProperty()},Candy.prototype.initProperty=function(){this.self=this.owner,this.pic=this.self.getChildByName("pic"),this.selfScene=this.self.scene,this.explodeTarget=null,this.roleParent=this.selfScene.MainSceneControl.roleParent,this.scoreLabel=this.selfScene.MainSceneControl.scoreLabel,this.selfSpeed=10,this.selfHealth=this.self.getChildByName("health"),this.timerControl=0,this.explode=this.selfScene.MainSceneControl.explode,this.spaceY=5,this.hintWord=this.selfScene.MainSceneControl.hintWord,this.selfScene.MainSceneControl.role_01.Role.role_Warning=!0,this.selfScene.MainSceneControl.role_02.Role.role_Warning=!0,this.self.Candy_Explode=this,this.skeleton=this.self.getChildByName("skeleton"),this.createBoneAni()},Candy.prototype.createBoneAni=function(){this.templet=new Laya.Templet,this.templet.on(Laya.Event.COMPLETE,this,this.parseComplete),this.templet.on(Laya.Event.ERROR,this,this.onError),this.templet.loadAni("candy/糖果/candyCompilations.sk")},Candy.prototype.onError=function(){console.log("骨骼动画加载错误")},Candy.prototype.parseComplete=function(){switch(this.self.name.substring(0,11)){case"yellowCandy":this.skeleton.play("yellow_explode",!0);break;case"redCandy___":this.skeleton.play("red_explode",!0);break;case"blueCandy__":this.skeleton.play("blue_explode",!0);break;case"greenCandy_":this.skeleton.play("green_explode",!0)}this.skeleton.playbackRate(1)},Candy.prototype.flyToRole=function(){if(!this.selfScene.MainSceneControl.gameOver&&null!==this.explodeTarget){var point=new Laya.Point(this.explodeTarget.x-this.self.x,this.explodeTarget.y-this.self.y);point.normalize(),this.self.x+=point.x*this.selfSpeed,this.self.y+=point.y*this.selfSpeed;var differenceX=Math.abs(this.self.x-this.explodeTarget.x),differenceY=Math.abs(this.self.y-this.explodeTarget.y);differenceX<50&&differenceY<50&&(this.self.removeSelf(),this.selfScene.MainSceneControl.explodeAni(this.selfScene,this.self.x,this.self.y,this.self.name.substring(0,11),15,100),this.propertyHintWord(),this.roleReduceProperty(),this.selfScene.MainSceneControl.role_01.Role.role_Warning=!0,this.selfScene.MainSceneControl.role_02.Role.role_Warning=!0,this.explodeTarget=null)}},Candy.prototype.propertyHintWord=function(){var MainSceneControl=this.selfScene.MainSceneControl;switch(this.self.name.substring(0,11)){case"yellowCandy":MainSceneControl.createHintWord(this.explodeTarget,"减少攻击里",10);break;case"redCandy___":MainSceneControl.createHintWord(this.explodeTarget,"减少生命",5);break;case"blueCandy__":MainSceneControl.createHintWord(this.explodeTarget,"减少公鸡速度",10);break;case"greenCandy_":MainSceneControl.createHintWord(this.explodeTarget,"减少防御力",5)}},Candy.prototype.roleReduceProperty=function(){this.self.name=this.self.name.substring(0,11);var role_01=this.selfScene.MainSceneControl.role_01,role_02=this.selfScene.MainSceneControl.role_02;switch(this.self.name){case"yellowCandy":this.explodeTarget===role_01?role_01.Role.role_property.attackValue-=10:role_02.Role.role_property.attackValue-=10;break;case"redCandy___":this.explodeTarget===role_01?role_01.Role.role_property.blood-=5:role_02.Role.role_property.blood-=5;break;case"blueCandy__":this.explodeTarget===role_01?role_01.Role.role_property.attackSpeed-=10:role_02.Role.role_property.attackSpeed-=10;break;case"greenCandy_":this.explodeTarget===role_01?role_01.Role.role_property.defense-=5:role_02.Role.role_property.defense-=5}},Candy.prototype.onUpdate=function(){this.selfHealth.value<=0&&(this.self.removeSelf(),this.selfScene.MainSceneControl.explodeAni(this.self.x,this.self.y,this.self.name.substring(0,11))),this.flyToRole()},Candy.prototype.onDisable=function(){Laya.Tween.clearAll(this),"yellowCandy"===this.self.name?Laya.Pool.recover("yellowCandy",this.self):"redCandy___"===this.self.name?Laya.Pool.recover("redCandy___",this.self):"blueCandy__"===this.self.name?Laya.Pool.recover("blueCandy__",this.self):"greenCandy_"===this.self.name&&Laya.Pool.recover("greenCandy_",this.self)},Candy}(Laya.Script);exports.default=Candy},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MainSceneControl_1=require("./MainSceneControl"),Enemy=function(_super){function Enemy(){return _super.call(this)||this}return __extends(Enemy,_super),Enemy.prototype.onEnable=function(){this.initProperty(),this.enemyPropertySet()},Enemy.prototype.initProperty=function(){this.self=this.owner,this.self.alpha=1,this.selfScene=this.owner.scene,this.mainSceneControl=this.selfScene.getComponent(MainSceneControl_1.default),this.roleParent=this.mainSceneControl.roleParent,this.selfHealth=this.self.getChildByName("health"),this.selfHealth.value=1,this.selfSpeed=3.5,this.propertyShow=this.self.getChildByName("propertyShow"),this.attackTnterval=100,this.recordTime=Date.now(),this.speakBox=this.mainSceneControl.speakBox,this.scoreLabel=this.mainSceneControl.scoreLabel,this.repelTimer=0,this.hintWord=this.mainSceneControl.hintWord,this.enemyBullet=this.mainSceneControl.enemyBullet,this.self.Enemy=this,this.skeleton&&this.skeleton.removeSelf(),this.role_01=this.selfScene.MainSceneControl.role_01,this.role_02=this.selfScene.MainSceneControl.role_02},Enemy.prototype.createBoneAni=function(){this.templet=new Laya.Templet,this.templet.on(Laya.Event.COMPLETE,this,this.parseComplete),this.templet.on(Laya.Event.ERROR,this,this.onError),"infighting"===this.enemyType?this.templet.loadAni("candy/敌人/fightingEnemy.sk"):"range"===this.enemyType&&this.templet.loadAni("candy/敌人/rangeEnemy.sk")},Enemy.prototype.onError=function(){console.log("骨骼动画加载错误")},Enemy.prototype.parseComplete=function(){this.skeleton=this.templet.buildArmature(0),this.skeletonListen(),this.self.addChild(this.skeleton),"infighting"===this.enemyType?(this.self.width=120,this.self.height=180,this.self.pivotX=this.self.width/2,this.self.pivotY=this.self.height/2,this.skeleton.x=63,this.skeleton.y=108,this.skeleton.play("move",!0),this.skeleton.playbackRate(1)):"range"===this.enemyType&&(this.self.width=120,this.self.height=180,this.self.pivotX=this.self.width/2,this.self.pivotY=this.self.height/2,this.skeleton.x=64,this.skeleton.y=86,this.self.x<Laya.stage.width/2?this.skeleton.play("moveRight",!0):this.skeleton.play("moveLeft",!0),this.skeleton.playbackRate(1))},Enemy.prototype.skeletonListen=function(){this.skeleton.on(Laya.Event.LABEL,this,function(e){"infighting"===this.enemyType?"hitOut"===e.name&&this.enemyAttackRules():"hitOut"===e.name&&this.creatBullet()})},Enemy.prototype.randomAttackPoint=function(){var difference;difference=1===Math.floor(2*Math.random())?-Math.floor(50*Math.random()):Math.floor(50*Math.random()),this.attackX=this.slefTagRole.x+difference,"infighting"===this.enemyType?this.attackY=this.slefTagRole.y-Math.floor(50*Math.random()):this.attackY=this.slefTagRole.y-Math.floor(50*Math.random())-450},Enemy.prototype.enemyPropertySet=function(){this.enemyProperty={level:"",blood:"",moveSpeed:"",defense:""},this.enemyProperty.blood=this.mainSceneControl.enemyProperty.blood,this.enemyProperty.attackValue=this.mainSceneControl.enemyProperty.attackValue,this.enemyProperty.attackSpeed=this.mainSceneControl.enemyProperty.attackSpeed,this.enemyProperty.defense=this.mainSceneControl.enemyProperty.defense,this.enemyProperty.moveSpeed=this.mainSceneControl.enemyProperty.moveSpeed},Enemy.prototype.enemyPropertyUpdate=function(){this.bloodLabel=this.selfHealth.getChildByName("bloodLabel");var str=Math.round(this.enemyProperty.blood*this.selfHealth.value).toString(),subStr_02=str.substring(0,str.length-1)+0;this.bloodLabel.text=subStr_02,this.propertyShow.getChildByName("blood").text="血量: "+this.enemyProperty.blood,this.propertyShow.getChildByName("attackValue").text="攻击力: "+this.enemyProperty.attackValue,this.propertyShow.getChildByName("attackSpeed").text="攻击速度: "+this.enemyProperty.attackSpeed,this.propertyShow.getChildByName("defense").text="防御力: "+this.enemyProperty.defense;var roleDefense=this.slefTagRole.Role.role_property.defense;this.mainSceneControl.enemyParent._children.length>20&&this.enemyProperty.attackValue<roleDefense&&(this.enemyProperty.attackValue=roleDefense+5)},Enemy.prototype.infightingEnemyMove=function(){var point=new Laya.Point(this.attackX-this.self.x,this.attackY-this.self.y);point.normalize(),this.slefTagRole.x>Laya.stage.width/2?this.mainSceneControl.role_01.Role.role_Warning=!0:this.slefTagRole.x<Laya.stage.width/2&&(this.mainSceneControl.role_02.Role.role_Warning=!0),this.repelTimer>0?(this.repelTimer--,this.self.x-=2*point.x,this.self.y-=2*point.y):(this.self.x+=point.x*this.selfSpeed,this.self.y+=point.y*this.selfSpeed)},Enemy.prototype.rangeEnemyMove=function(){var point=new Laya.Point(this.attackX-this.self.x,this.attackY-this.self.y);point.normalize(),this.self.x+=point.x*this.selfSpeed,this.self.y+=point.y*this.selfSpeed},Enemy.prototype.enemyAttackRules=function(){var damage=this.enemyProperty.attackValue-this.slefTagRole.Role.role_property.defense;damage>0?this.slefTagRole.Role.role_property.blood-=damage:damage=0,this.createHintWord(damage)},Enemy.prototype.createHintWord=function(damage){var hintWord=Laya.Pool.getItemByCreateFun("candy",this.hintWord.create,this.hintWord);hintWord.pos(0,-150),this.slefTagRole.addChild(hintWord);this.slefTagRole.parent&&hintWord.HintWord.initProperty("敌人掉血",damage)},Enemy.prototype.creatBullet=function(){var bullet=Laya.Pool.getItemByCreateFun("enemyBullet",this.enemyBullet.create,this.enemyBullet);this.mainSceneControl.bulletParent.addChild(bullet),bullet.pos(this.self.x-100,this.self.y),bullet.EnemyBullet.belongEnemy=this.self,bullet.EnemyBullet.bulletTarget=this.slefTagRole},Enemy.prototype.replaceTarget=function(){this.slefTagRole.Role.roleDeath||("role_01"===this.slefTagRole.name?(this.slefTagRole=this.mainSceneControl.role_02,this.tagHealth=this.mainSceneControl.role_02.getChildByName("health")):"role_02"===this.slefTagRole.name&&(this.slefTagRole=this.mainSceneControl.role_01,this.tagHealth=this.mainSceneControl.role_01.getChildByName("health")))},Enemy.prototype.playSpeedAdjust=function(){var playSpeed;playSpeed=(500-this.enemyProperty.attackSpeed)/500>0?1+(500-this.enemyProperty.attackSpeed)/500:1,this.skeleton.playbackRate(playSpeed)},Enemy.prototype.enemyDeath=function(){this.mainSceneControl.role_01.Role.role_Warning=!1,this.mainSceneControl.role_02.Role.role_Warning=!1,this.self.removeSelf(),"infighting"===this.enemyType?this.selfScene.MainSceneControl.explodeAni(this.selfScene,this.self.x,this.self.y,"infighting",15,100):this.selfScene.MainSceneControl.explodeAni(this.selfScene,this.self.x,this.self.y,"range",15,100)},Enemy.prototype.onUpdate=function(){if(!this.selfScene.MainSceneControl.gameOver&&null!==this.slefTagRole)if(this.enemyProperty.blood<0)this.enemyDeath();else if(this.enemyPropertyUpdate(),"range"===this.enemyType){this.rangeEnemyMove();var differenceX=Math.abs(this.self.x-this.attackX),differenceY=Math.abs(this.self.y-this.attackY);if(differenceX<10&&differenceY<10)this.role_01.Role.role_Warning=!0,this.role_02.Role.role_Warning=!0,this.selfSpeed=0,(nowTime=Date.now())-this.recordTime>this.enemyProperty.attackSpeed&&(this.recordTime=nowTime,this.slefTagRole.Role.role_property.blood>0?(this.skeleton.play("attack",!1),this.playSpeedAdjust()):this.replaceTarget())}else if("infighting"===this.enemyType){this.infightingEnemyMove();var nowTime;differenceX=Math.abs(this.self.x-this.attackX),differenceY=Math.abs(this.self.y-this.attackY);if(differenceX<100&&differenceY<100)this.selfSpeed=0,(nowTime=Date.now())-this.recordTime>this.enemyProperty.attackSpeed&&(this.recordTime=nowTime,this.slefTagRole.Role.role_property.blood>0?(this.skeleton.play("attack",!1),this.playSpeedAdjust()):this.replaceTarget());else this.selfSpeed=4}},Enemy.prototype.onDisable=function(){Laya.Pool.recover("enemy",this.self)},Enemy}(Laya.Script);exports.default=Enemy},{"./MainSceneControl":10}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MainSceneControl_1=require("./MainSceneControl"),EnemyBullet=function(_super){function EnemyBullet(){return _super.call(this)||this}return __extends(EnemyBullet,_super),EnemyBullet.prototype.onEnable=function(){this.init()},EnemyBullet.prototype.init=function(){this.self=this.owner,this.selfScene=this.self.scene,this.mainSceneControl=this.selfScene.getComponent(MainSceneControl_1.default),this.enemyParent=this.mainSceneControl.enemyParent,this.selfSpeed=15,this.attackValue=this.mainSceneControl.enemyProperty.attackValue,this.roleParent=this.selfScene.MainSceneControl.roleParent,this.self.EnemyBullet=this},EnemyBullet.prototype.bulletMove=function(){var point;this.bulletTarget&&this.bulletTarget.parent?((point=new Laya.Point(this.bulletTarget.x-this.self.x,this.bulletTarget.y-this.self.y)).normalize(),this.self.x+=point.x*this.selfSpeed,this.self.y+=point.y*this.selfSpeed):((point=new Laya.Point(this.self.x-this.belongEnemy.x,this.self.y-this.belongEnemy.y)).normalize(),this.self.x+=point.x*this.selfSpeed,this.self.y+=point.y*this.selfSpeed)},EnemyBullet.prototype.bulletAttackRules=function(role){var damage=this.attackValue-role.Role.role_property.defense;damage>0&&(role.Role.role_property.blood-=damage)},EnemyBullet.prototype.onUpdate=function(){this.bulletMove(),(this.self.x>750+this.self.width+50||this.self.x<-this.self.width)&&this.self.removeSelf();for(var i=0;i<this.roleParent._children.length;i++){var role=this.roleParent._children[i],differenceX=Math.abs(role.x-this.self.x),differenceY=Math.abs(role.y-this.self.y);differenceX<10&&differenceY<10&&(this.bulletAttackRules(role),this.self.removeSelf())}},EnemyBullet.prototype.onDisable=function(){},EnemyBullet}(Laya.Script);exports.default=EnemyBullet},{"./MainSceneControl":10}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Tool_1=require("./Tool"),Explode=function(_super){function Explode(){return _super.call(this)||this}return __extends(Explode,_super),Explode.prototype.onEnable=function(){this.timer=0,this.accelerated=.1,this.self=this.owner,this.img=this.self.getChildByName("img"),this.self.Explode=this,this.self.pivotX=this.self.width/2,this.self.pivotY=this.self.height/2},Explode.prototype.initProperty=function(type){switch(this.effectsType=type,type){case"starShining":this.starShiningProperty();break;case"disappear":this.disappearProperty();break;case"appear":this.appearProperty();break;case"fireworks":this.fireworksProperty();break;case"smokeEffects":this.smokeProperty();break;case"infighting":this.infightingProperty();break;case"range":this.rangeProperty();break;case"redCandy___":this.redCandyProperty();break;case"greenCandy_":this.greenCandyProperty();break;case"blueCandy__":this.blueCandyProperty();break;case"yellowCandy":this.yellowCandyProperty()}this.img.pivotX=this.img.width/2,this.img.pivotY=this.img.height/2},Explode.prototype.commonEnmeyAndCandy=function(){this.moveSwitch=!0,this.randomSpeed=Math.floor(5*Math.random())+10,this.initialAngle=Math.floor(360*Math.random()),this.scale=Math.floor(4*Math.random())+6,this.self.scaleX=this.scale/10,this.self.scaleY=this.scale/10,this.vinshTime=Math.floor(5*Math.random())+2,this.startAlpha=(Math.floor(10*Math.random())+5)/10,this.self.alpha=this.startAlpha,this.rotationD=1===Math.floor(2*Math.random())?-20:20},Explode.prototype.infightingProperty=function(){this.commonEnmeyAndCandy(),this.img.skin="candy/特效/白色单元.png"},Explode.prototype.rangeProperty=function(){this.commonEnmeyAndCandy(),this.img.skin="candy/特效/黑色单元.png"},Explode.prototype.redCandyProperty=function(){this.commonEnmeyAndCandy(),this.img.skin="candy/特效/红色单元.png"},Explode.prototype.yellowCandyProperty=function(){this.commonEnmeyAndCandy(),this.img.skin="candy/特效/黄色单元.png"},Explode.prototype.blueCandyProperty=function(){this.commonEnmeyAndCandy(),this.img.skin="candy/特效/蓝色单元.png"},Explode.prototype.greenCandyProperty=function(){this.commonEnmeyAndCandy(),this.img.skin="candy/特效/绿色单元.png"},Explode.prototype.commonExplosion=function(){this.accelerated+=.3,this.timer>0&&this.timer<=5?this.commonSpeedXYByAngle(this.initialAngle,this.randomSpeed):this.timer>5&&this.timer<15?(this.self.alpha-=.01,this.commonSpeedXYByAngle(this.initialAngle,this.randomSpeed)):this.timer>=15&&this.timer<17||this.timer>=17&&(this.vinshTime-=.1,this.vinshTime<0&&this.self.removeSelf())},Explode.prototype.fireworksProperty=function(){switch(this.moveSwitch=!0,this.randomSpeed=Math.floor(15*Math.random())+2,this.initialAngle=Math.floor(360*Math.random()),this.scale=Math.floor(8*Math.random())+4,this.self.scaleX=this.scale/10,this.self.scaleY=this.scale/10,this.vinshTime=Math.floor(5*Math.random())+2,this.startAlpha=1,this.self.alpha=this.startAlpha,this.rotationD=1===Math.floor(2*Math.random())?-10:10,Math.floor(7*Math.random())+1){case 1:this.img.skin="candy/特效/星星1.png";break;case 2:this.img.skin="candy/特效/星星2.png";break;case 3:this.img.skin="candy/特效/星星3.png";break;case 4:this.img.skin="candy/特效/星星4.png";break;case 5:this.img.skin="candy/特效/星星5.png";break;case 6:this.img.skin="candy/特效/星星6.png";break;case 7:this.img.skin="candy/特效/星星7.png"}},Explode.prototype.fireworksExplosion=function(){this.img.rotation+=this.rotationD,this.accelerated+=.1,this.timer>0&&this.timer<=15?this.commonSpeedXYByAngle(this.initialAngle,this.randomSpeed+5):this.timer>15&&this.timer<18?this.commonSpeedXYByAngle(this.initialAngle,this.randomSpeed-5):this.timer>=18&&this.self.removeSelf()},Explode.prototype.smokeProperty=function(){this.moveSwitch=!0,this.randomSpeed=Math.floor(10*Math.random())+5,this.initialAngle=90,this.scale=Math.floor(4*Math.random())+2,this.self.scale(this.scale/10,this.scale/10),this.vinshTime=Math.floor(5*Math.random())+2,this.startAlpha=1,this.self.alpha=this.startAlpha,this.img.skin="candy/特效/白色单元.png"},Explode.prototype.smokeEffects=function(){this.timer>0&&this.timer<=10?(this.self.scaleX+=.08,this.self.scaleY+=.08,this.self.y-=.01):this.timer>10&&this.timer<40?this.self.y-=2:this.timer>40&&(this.self.y-=2,this.startAlpha-=.025,this.startAlpha<0&&this.self.removeSelf())},Explode.prototype.disappearProperty=function(){switch(this.moveSwitch=!0,this.randomSpeed=2*Math.random()+2,this.initialAngle=Math.floor(360*Math.random()),this.scale=7,this.self.scale(this.scale/10,this.scale/10),this.vinshTime=Math.floor(5*Math.random())+2,this.startAlpha=(Math.floor(6*Math.random())+4)/10,this.self.alpha=this.startAlpha,this.rotationD=1===Math.floor(2*Math.random())?-5:5,this.img.skin="candy/特效/白色单元.png",this.img.rotation=this.initialAngle-90,Math.floor(2*Math.random())){case 0:this.img.skin="candy/特效/白色单元.png";break;case 1:this.img.skin="candy/特效/白色单元_02.png"}},Explode.prototype.disappearEffects=function(){this.accelerated+=.01,this.timer>0&&this.timer<=15?this.commonSpeedXYByAngle(this.initialAngle,this.randomSpeed):this.timer>15&&this.timer<25?this.commonSpeedXYByAngle(this.initialAngle,this.randomSpeed-2):this.timer>=25&&(this.self.alpha-=.02,this.self.alpha<=0&&this.self.removeSelf())},Explode.prototype.appearProperty=function(){switch(this.moveSwitch=!0,this.randomSpeed=2*Math.random()+2,this.initialAngle=Math.floor(360*Math.random()),this.scale=7,this.self.scale(this.scale/10,this.scale/10),this.vinshTime=Math.floor(5*Math.random())+2,this.startAlpha=(Math.floor(6*Math.random())+4)/10,this.self.alpha=this.startAlpha,this.rotationD=1===Math.floor(2*Math.random())?-5:5,this.img.skin="candy/特效/白色单元.png",this.img.rotation=this.initialAngle-90,Math.floor(2*Math.random())){case 0:this.img.skin="candy/特效/白色单元.png";break;case 1:this.img.skin="candy/特效/白色单元_02.png"}},Explode.prototype.appearEffects=function(){this.accelerated+=.01,this.timer>0&&this.timer<=20?this.commonSpeedXYByAngle(this.initialAngle,this.randomSpeed):this.timer>20&&this.timer<30?this.commonSpeedXYByAngle(this.initialAngle,this.randomSpeed-2):this.timer>=30&&(this.self.alpha-=.02,this.self.alpha<=0&&this.self.removeSelf())},Explode.prototype.starShiningProperty=function(){switch(this.moveSwitch=!0,this.randomSpeed=Math.floor(15*Math.random())+2,this.scale=Math.floor(8*Math.random())+4,this.self.scale(this.scale/10,this.scale/10),this.startAlpha=0,this.self.alpha=this.startAlpha,this.rotationD=1===Math.floor(2*Math.random())?-5:5,Math.floor(7*Math.random())+1){case 1:this.img.skin="candy/特效/星星1.png";break;case 2:this.img.skin="candy/特效/星星2.png";break;case 3:this.img.skin="candy/特效/星星3.png";break;case 4:this.img.skin="candy/特效/星星4.png";break;case 5:this.img.skin="candy/特效/星星5.png";break;case 6:this.img.skin="candy/特效/星星6.png";break;case 7:this.img.skin="candy/特效/星星7.png"}},Explode.prototype.starShiningEffects=function(){this.timer>0&&this.timer<=15?(this.self.alpha+=.1,this.self.rotation+=this.rotationD,this.self.scaleX+=.01,this.self.scaleY+=.01):this.timer>15&&this.timer<25?this.self.rotation+=this.rotationD:this.timer>=25&&(this.self.rotation-=this.rotationD,this.self.alpha-=.015,this.self.scaleX-=.01,this.self.scaleY-=.01,this.self.alpha<=0&&this.self.removeSelf())},Explode.prototype.move=function(){"fireworks"===this.effectsType?this.fireworksExplosion():"smokeEffects"===this.effectsType?this.smokeEffects():"disappear"===this.effectsType?this.disappearEffects():"appear"===this.effectsType?this.appearEffects():"starShining"===this.effectsType?this.starShiningEffects():this.commonExplosion()},Explode.prototype.commonSpeedXYByAngle=function(angle,speed){this.self.x+=Tool_1.default.speedXYByAngle(angle,speed+this.accelerated).x,this.self.y+=Tool_1.default.speedXYByAngle(angle,speed+this.accelerated).y},Explode.prototype.onUpdate=function(){this.moveSwitch&&(this.timer+=1,this.move())},Explode.prototype.onDisable=function(){Laya.Pool.recover("explode",this.self)},Explode}(Laya.Script);exports.default=Explode},{"./Tool":20}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var HintWord=function(_super){function HintWord(){return _super.call(this)||this}return __extends(HintWord,_super),HintWord.prototype.onEnable=function(){this.self=this.owner,this.self.HintWord=this,this.selfScene=this.self.scene,this.self.alpha=0,this.self.pivotX=this.self.width/2,this.propertyType=this.self.getChildByName("propertyType"),this.addNumber=this.self.getChildByName("addNumber"),this.subNumber=this.self.getChildByName("subNumber"),this.addScore=this.self.getChildByName("addScore"),this.propertyType.value=null,this.addNumber.value=null,this.subNumber.value=null,this.addScore.value=null,this.scoreLabel=this.selfScene.MainSceneControl.scoreLabel},HintWord.prototype.initProperty=function(propertyType,numberValue){switch(propertyType){case"公鸡速度":this.propertyType.value="公鸡速度",this.propertyType.x-=40,this.addNumber.value="+"+numberValue,this.propertyMove();break;case"攻击里":this.propertyType.value="攻击里",this.propertyType.x-=20,this.addNumber.x-=20,this.addNumber.value="+"+numberValue,this.propertyMove();break;case"生命":this.propertyType.value="生命",this.addNumber.x-=40,this.addNumber.value="+"+numberValue,this.propertyMove();break;case"防御力":this.propertyType.value="防御力",this.propertyType.x-=20,this.addNumber.x-=20,this.addNumber.value="+"+numberValue,this.propertyMove();break;case"减少公鸡速度":this.propertyType.value="公鸡速度",this.subNumber.x-=40,this.subNumber.value="-"+numberValue,this.propertyMove();break;case"减少攻击里":this.propertyType.value="攻击里",this.propertyType.x-=20,this.subNumber.x-=20,this.subNumber.value="-"+numberValue,this.propertyMove();break;case"减少生命":this.propertyType.value="生命",this.subNumber.x-=40,this.subNumber.value="-"+numberValue,this.propertyMove();break;case"减少防御力":this.propertyType.value="防御力",this.propertyType.x-=20,this.subNumber.x-=20,this.subNumber.value="-"+numberValue,this.propertyMove();break;case"主角掉血":case"敌人掉血":this.subNumber.x-=80,this.subNumber.value="-"+numberValue,this.propertyMove();break;case"增加分数":this.addScore.value="+"+numberValue,this.addScoreMove(numberValue)}},HintWord.prototype.propertyMove=function(){var timeLine=new Laya.TimeLine;timeLine.addLabel("appear",0).to(this.self,{y:this.self.y-60,alpha:1},100,null,0).addLabel("pause",0).to(this.self,{y:this.self.y-120},800,null,0).addLabel("vanish",0).to(this.self,{y:this.self.y-150,alpha:0},100,null,0),timeLine.play("appear",!1),timeLine.on(Laya.Event.COMPLETE,this,function(){this.self.removeSelf()})},HintWord.prototype.addScoreMove=function(numberValue){var scoreLabel_p=this.scoreLabel.parent,scoreLabel_p_p=scoreLabel_p.parent,stageX=this.scoreLabel.x+scoreLabel_p.x+scoreLabel_p_p.x,stageY=this.scoreLabel.y+scoreLabel_p.y+scoreLabel_p_p.y,timeLine=new Laya.TimeLine;timeLine.addLabel("appear",0).to(this.self,{y:this.self.y-60,alpha:1},100,null,0).addLabel("pause",0).to(this.self,{y:this.self.y-120},600,null,0).addLabel("moveUp",0).to(this.self,{y:this.self.y-150,alpha:1},100,null,0).addLabel("moveTo",0).to(this.self,{scaleX:.5,scaleY:.5,rotation:-360,x:stageX,y:stageY,alpha:1},600,Laya.Ease.cubicIn,0).addLabel("vanish",0).to(this.self,{y:stageY-100,alpha:0},100,Laya.Ease.cubicIn,0),timeLine.play("appear",!1),timeLine.on(Laya.Event.COMPLETE,this,function(){this.self.removeSelf(),this.scoreLabel.value=(Number(this.scoreLabel.value)+numberValue).toString()})},HintWord.prototype.onDisable=function(){Laya.Pool.recover("hintWord",this.self)},HintWord}(Laya.Script);exports.default=HintWord},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MainSceneControl=function(_super){function MainSceneControl(){return _super.call(this)||this}return __extends(MainSceneControl,_super),MainSceneControl.prototype.onEnable=function(){this.noStarted(),this.createStartInterface("start")},MainSceneControl.prototype.startGame=function(){this.enemyAppear=!1,this.enemyTagRole=null,this.enemyCount=0,this.enemyProperty={blood:200,attackValue:200,attackSpeed:1e3,defense:10,moveSpeed:10,creatInterval:5e3},this.enemyInterval_01=500,this.enemyTime_01=Date.now(),this.enemySwitch_01=!0,this.enemyInterval_02=500,this.enemyTime_02=Date.now(),this.enemySwitch_02=!0,this.candy_interval=1e3,this.creatTime=Date.now(),this.creatOnOff=!0,this.nameArr=[],this.candyCount=0,this.scoreLabel.value="0",this.timeSchedule=this.timer.getChildByName("timeSchedule"),this.rescueNum=0,Laya.MouseManager.multiTouchEnabled=!1,this.timerControl=0,this.suspend=!1,this.startRow=4,this.gameOver=!1,this.assembly.Assembly.pipeAnimation("flow"),this.candyMoveToDisplay()},MainSceneControl.prototype.noStarted=function(){this.self=this.owner,this.owner.MainSceneControl=this,this.gameOver=!0,this.createLaunchAni()},MainSceneControl.prototype.createStartInterface=function(type){var startInterface=Laya.Pool.getItemByCreateFun("startInterface",this.startInterface.create,this.startInterface);this.owner.addChild(startInterface),startInterface.pivotX=startInterface.width/2,startInterface.pivotY=startInterface.height/2,startInterface.x=Laya.stage.width/2,startInterface.y=Laya.stage.height/2,startInterface.startGame.aniTypeInit(type)},MainSceneControl.prototype.createLaunchAni=function(){this.launchTemp_01=new Laya.Templet,this.launchTemp_01.on(Laya.Event.COMPLETE,this,this.parseComplete_01),this.launchTemp_01.on(Laya.Event.ERROR,this,this.onError),this.launchTemp_01.loadAni("candy/糖果机器/candyLaunch.sk"),this.launchTemp_02=new Laya.Templet,this.launchTemp_02.on(Laya.Event.COMPLETE,this,this.parseComplete_02),this.launchTemp_02.on(Laya.Event.ERROR,this,this.onError),this.launchTemp_02.loadAni("candy/糖果机器/candyLaunch.sk")},MainSceneControl.prototype.onError=function(){console.log("骨骼动画加载错误")},MainSceneControl.prototype.parseComplete_01=function(){this.candyLaunch_01=this.assembly.getChildByName("candyLaunch_01"),this.candyLaunch_01.play("static",!1),this.candyLaunch_01.on(Laya.Event.LABEL,this,this.candyLaunchListen_01)},MainSceneControl.prototype.parseComplete_02=function(){this.candyLaunch_02=this.assembly.getChildByName("candyLaunch_02"),this.candyLaunch_02.play("static",!1),this.candyLaunch_02.on(Laya.Event.LABEL,this,this.candyLaunchListen_02)},MainSceneControl.prototype.candyLaunchListen_01=function(e){"launch"===e.name?console.log("发射！"):"getReady"===e.name&&(this.candyMoveToDisplay(),this.timeSchedule.value=1)},MainSceneControl.prototype.candyLaunchListen_02=function(e){"launch"===e.name?console.log("发射！"):e.name},MainSceneControl.prototype.candyMoveToDisplay=function(){for(var delayed=10,startX_02=Laya.stage.width/2-42,startX_01=Laya.stage.width/2+58,startY=this.displays.y+396-35,_loop_1=function(i){Laya.timer.frameOnce(delayed,this_1,function(){for(var j=0;j<2;j++){var candy=this.createCandy();if(candy.Candy.group=i,candy.zOrder=this.startRow-i,0===j){candy.pos(this.displays.x+160,this.displays.y-50),candy.scaleX=0,candy.scaleY=0,this.candyLaunch_01.play("launchLeft",!1);var targetY=startY-99*i;this.candyFlipTheAni(candy,startX_01,targetY)}else{candy.pos(this.displays.x-160,this.displays.y-50),candy.scaleX=.5,candy.scaleY=.5,this.candyLaunch_02.play("launchRight",!1);targetY=startY-99*i;this.candyFlipTheAni(candy,startX_02,targetY)}}}),delayed+=15},this_1=this,i=0;i<this.startRow;i++)_loop_1(i)},MainSceneControl.prototype.candyFlipTheAni=function(candy,targetX,targetY){var timePar=500-100*candy.Candy.group;Laya.Tween.to(candy,{scaleX:.8,scaleY:.8,y:candy.y-30},timePar/2,null,Laya.Handler.create(this,function(){var HalfX;HalfX=candy.x>Laya.stage.width/2?candy.x-(candy.x-targetX)/3:candy.x+(targetX-candy.x)/3;var HalfY=candy.y+(targetY-candy.y)/3;Laya.Tween.to(candy,{x:HalfX,y:HalfY,scaleX:1.3,scaleY:1.3},3*timePar/4,null,Laya.Handler.create(this,function(){Laya.Tween.to(candy,{x:targetX,y:targetY,scaleX:1,scaleY:1},timePar,null,Laya.Handler.create(this,function(){this.explodeAni(this.owner,candy.x,candy.y,"disappear",8,1e3),candy.Candy.playSkeletonAni(1,"static"),3===candy.Candy.group&&(this.operating.OperationControl.operateSwitch=!0,this.operating.OperationControl.clickHint(),this.launchNum=0,this.launchSwitch=!1)}),0)}),0)}),10);var shadow=candy.getChildByName("shadow");Laya.Tween.to(shadow,{},timePar/2,null,Laya.Handler.create(this,function(){Laya.Tween.to(shadow,{x:-20,y:100,scaleX:.5,scaleY:.5},3*timePar/4,null,Laya.Handler.create(this,function(){Laya.Tween.to(shadow,{x:0,y:0,scaleX:1,scaleY:1},timePar,null,Laya.Handler.create(this,function(){}),0)}),0)}),10)},MainSceneControl.prototype.createCandy=function(){var candy=Laya.Pool.getItemByCreateFun("candy",this.candy.create,this.candy);switch(Math.floor(4*Math.random())){case 0:candy.name="yellowCandy"+this.candyCount;break;case 1:candy.name="redCandy___"+this.candyCount;break;case 2:candy.name="blueCandy__"+this.candyCount;break;case 3:candy.name="greenCandy_"+this.candyCount}return candy.getChildByName("clicksLabel").text="",candy.pos(Laya.stage.width/2,-100),candy.pivotX=candy.width/2,candy.pivotY=candy.height/2,this.candyParent.addChild(candy),candy.rotation=0,this.candyCount++,candy},MainSceneControl.prototype.createExplodeCandy=function(candyName){var explodeCandy=Laya.Pool.getItemByCreateFun("candy_Explode",this.candy_Explode.create,this.candy_Explode);return explodeCandy.pos(Laya.stage.width/2,-100),this.candy_ExplodeParent.addChild(explodeCandy),explodeCandy.rotation=0,this.candyCount++,explodeCandy.name=candyName.substring(0,11),explodeCandy},MainSceneControl.prototype.explodeCandyzOrder=function(){for(var len=this.candy_ExplodeParent._children.length,i=0;i<len;i++)this.candy_ExplodeParent._children[i].zOrder=Math.round(this.candy_ExplodeParent._children[i].y)},MainSceneControl.prototype.roleSpeakBoxs=function(){for(var i=0;i<2;i++){var speakBox=Laya.Pool.getItemByCreateFun("speakBox",this.speakBox.create,this.speakBox);if(this.speakBoxParent.addChild(speakBox),0===i){speakBox.pos(this.role_01.x,this.role_01.y),this.role_01speak=speakBox,this.role_01speak.alpha=0;var pic=this.role_01speak.getChildByName("pic"),label=this.role_01speak.getChildByName("label");pic.scaleX=-1,label.x+=30}else speakBox.pos(this.role_02.x,this.role_02.y),this.role_02speak=speakBox,this.role_02speak.alpha=0}},MainSceneControl.prototype.roleDeathState=function(){var len=this.roleParent._children.length;if(0===len)return this.enemySwitch_01=!1,void(this.enemySwitch_02=!1);if(1===len){var speak_01=this.role_01speak.getChildByName("label"),speak_02=this.role_02speak.getChildByName("label");this.rescueNum>=5?(this.rescueNum=0,"role_01"===this.roleParent._children[0].name?(this.roleParent.addChild(this.role_02),this.role_02speak.x-=150,speak_02.text="谢谢你啊！"):(this.roleParent.addChild(this.role_01),speak_01.text="谢谢你啊！",this.role_01speak.x+=150)):"role_01"===this.roleParent._children[0].name?(this.role_02speak.alpha=1,this.role_02speak.x=this.role_02.x,speak_02.text="连续吃5个糖果不犯错的话我就复活了"):(this.role_01speak.alpha=1,this.role_01speak.x=this.role_01.x,speak_01.text="连续吃5个糖果不犯错的话我就复活了")}else 2===len&&this.rescueNum},MainSceneControl.prototype.careatEnemy=function(mode,tagRole,type){if(this.enemyCount++,null!==tagRole){var enemy=Laya.Pool.getItemByCreateFun("enemy",this.enemy.create,this.enemy);this.enemyParent.addChild(enemy),enemy.name="enemy"+this.enemyCount,enemy.pivotX=enemy.width/2,enemy.pivotY=enemy.height/2,"left"===mode?enemy.pos(-50,300):"right"===mode?enemy.pos(800,300):"target"===mode&&(tagRole.x<Laya.stage.width/2&&tagRole.x>0?enemy.pos(-50,300):tagRole.x>=Laya.stage.width/2&&tagRole.x<Laya.stage.width&&enemy.pos(800,300)),enemy.Enemy.slefTagRole=tagRole,enemy.Enemy.enemyType=type,enemy.Enemy.randomAttackPoint(),enemy.Enemy.createBoneAni();var propertyShow=enemy.getChildByName("propertyShow");return this.suspend?propertyShow.alpha=1:propertyShow.alpha=0,enemy}},MainSceneControl.prototype.enemyOrder=function(){for(var i=0;i<this.enemyParent._children.length;i++)this.enemyParent._children[i].zOrder=Math.round(this.enemyParent._children[i].y)},MainSceneControl.prototype.enemyPropertyUpdate=function(){this.timerControl%600==0&&(this.enemyProperty.blood+=50,this.enemyProperty.attackValue+=1,this.enemyProperty.attackSpeed+=10,this.enemyProperty.attackSpeed<100&&(this.enemyProperty.attackSpeed=100),this.enemyProperty.defense+=1,this.enemyProperty.creatInterval+=50,this.enemyProperty.creatInterval<500&&(this.enemyProperty.creatInterval=500))},MainSceneControl.prototype.explodeAni=function(parent,x,y,type,number,zOrder){for(var i=0;i<number;i++){var explode=Laya.Pool.getItemByCreateFun("explode",this.explode.create,this.explode);parent.addChild(explode),explode.zOrder=zOrder,explode.pos(x,y),explode.Explode.type=type,explode.Explode.initProperty(type)}},MainSceneControl.prototype.createResurgence=function(){this.assembly.Assembly.pipeAnimation("static");var resurgence=Laya.Pool.getItemByCreateFun("resurgence",this.resurgence.create,this.resurgence);this.self.addChild(resurgence),resurgence.zOrder=1e3,resurgence.pos(0,0)},MainSceneControl.prototype.createHintWord=function(target,proPertyType,numberValue){var hintWord=Laya.Pool.getItemByCreateFun("hintWord",this.hintWord.create,this.hintWord);target.addChild(hintWord),hintWord.pos(100,-10),hintWord.HintWord.initProperty(proPertyType,numberValue)},MainSceneControl.prototype.restart=function(){for(var enemyDelayed=0,len1=this.enemyParent._children.length,_loop_2=function(i){Laya.timer.frameOnce(enemyDelayed,this_2,function(){if(this.enemyParent._children[i]){this.enemyParent._children[i].alpha=0;var x=this.enemyParent._children[i].x,y=this.enemyParent._children[i].y;"infighting"===this.enemyParent._children[i].Enemy?this.explodeAni(this.owner,x,y,"infighting",15,100):this.explodeAni(this.owner,x,y,"range",15,100),i===len1-1&&this.enemyParent.removeChildren(0,len1-1)}}),enemyDelayed+=20},this_2=this,i=0;i<this.enemyParent._children.length;i++)_loop_2(i);for(var candyExpoleDelayed=0,len2=this.candy_ExplodeParent._children.length,_loop_3=function(j){Laya.timer.frameOnce(candyExpoleDelayed,this_3,function(){if(this.candy_ExplodeParent._children[j]){this.candy_ExplodeParent._children[j].alpha=0;this.candy_ExplodeParent._children[j].name.substring(0,11);var x=this.candy_ExplodeParent._children[j].x,y=this.candy_ExplodeParent._children[j].y;this.explodeAni(this.owner,x,y,"disappear",8,1e3),j===len2-1&&this.candy_ExplodeParent.removeChildren(0,len2-1)}}),candyExpoleDelayed+=20},this_3=this,j=0;j<len2;j++)_loop_3(j);var candyDelayed=0,len3=this.candyParent._children.length;if(0===len3)return this.roleResurgenceAni(),void this.candyParent.removeChildren(0,len3-1);for(var _loop_4=function(k){Laya.timer.frameOnce(candyDelayed,this_4,function(){if(this.candyParent._children[k]){this.candyParent._children[k].alpha=0;this.candyParent._children[k].name.substring(0,11);var x=this.candyParent._children[k].x,y=this.candyParent._children[k].y;this.explodeAni(this.owner,x,y,"disappear",8,1e3),k===len3-1&&(this.roleResurgenceAni(),this.candyParent.removeChildren(0,len3-1))}}),candyDelayed+=20},this_4=this,k=0;k<len3;k++)_loop_4(k)},MainSceneControl.prototype.roleResurgenceAni=function(){this.role_01.getChildByName("skeleton").play("speak",!0),Laya.Tween.to(this.role_01,{alpha:1},700,null,Laya.Handler.create(this,function(){this.restartProperties()},[]),0),this.role_02.getChildByName("skeleton").play("speak",!0),Laya.Tween.to(this.role_02,{alpha:1},700,null,Laya.Handler.create(this,function(){},[]),0)},MainSceneControl.prototype.restartProperties=function(){this.startGame(),this.role_01.Role.role_Warning=!1,this.role_01.Role.roleDeath=!1,this.role_01.Role.initProperty(),this.role_02.Role.role_Warning=!1,this.role_02.Role.roleDeath=!1,this.role_02.Role.initProperty(),this.operating.OperationControl.initProperty()},MainSceneControl.prototype.returnStartSet=function(){this.scoreLabel.value="0",this.noStarted();var len1=this.enemyParent._children.length;this.enemyParent.removeChildren(0,len1-1);var len2=this.candy_ExplodeParent._children.length;this.candy_ExplodeParent.removeChildren(0,len2-1);var len3=this.candyParent._children.length;this.candyParent.removeChildren(0,len3-1),this.role_01.alpha=1,this.role_01.Role.role_Warning=!1,this.role_01.Role.roleDeath=!1,this.role_01.Role.initProperty(),this.role_02.alpha=1,this.role_02.Role.role_Warning=!1,this.role_02.Role.roleDeath=!1,this.role_02.Role.initProperty(),this.operating.OperationControl.initProperty()},MainSceneControl.prototype.wxPostData=function(){if(Laya.Browser.onMiniGame){var args={type:"scores",data:{scores:this.scoreLabel.value}};Laya.Browser.window.wx.getOpenDataContext().postMessage(args),console.log("上传了")}else console.log("没有上传")},MainSceneControl.prototype.wxShare=function(){Laya.Browser.onMiniGame?(Laya.Browser.window.wx.shareAppMessage({title:"怪星大作战"}),console.log("主动进行了转发")):console.log("仅支持微信客户端")},MainSceneControl.prototype.onUpdate=function(){if(!this.gameOver){if(this.role_01.Role.roleDeath&&this.role_02.Role.roleDeath)return this.gameOver=!0,void this.createResurgence();var nowTime;if(this.enemyOrder(),this.timerControl+=1,this.enemyPropertyUpdate(),this.roleDeathState(),this.enemySwitch_01)(nowTime=Date.now())-this.enemyTime_01>this.enemyProperty.creatInterval&&(this.enemyTime_01=nowTime,this.enemyTagRole=this.role_01,this.careatEnemy("left",this.role_01,"infighting"),this.careatEnemy("left",this.role_01,"range"),this.enemyTagRole=null);if(this.enemySwitch_02)(nowTime=Date.now())-this.enemyTime_02>this.enemyProperty.creatInterval&&(this.enemyTime_02=nowTime,this.enemyTagRole=this.role_02,this.careatEnemy("right",this.role_02,"infighting"),this.careatEnemy("right",this.role_02,"range"),this.enemyTagRole=null)}},MainSceneControl.prototype.onDisable=function(){},MainSceneControl}(Laya.Script);exports.default=MainSceneControl},{}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var OperationButton=function(_super){function OperationButton(){return _super.call(this)||this}return __extends(OperationButton,_super),OperationButton.prototype.onEnable=function(){this.initProperty(),this.buttonClink()},OperationButton.prototype.initProperty=function(){this.self=this.owner,this.selfScene=this.self.scene,this.clicksCount=0,this.clicksNameArr=[],this.rightName=[],this.errorName=[],this.alreadyGroup=[],this.candyParent=this.selfScene.MainSceneControl.candyParent,this.candy_Explode=this.selfScene.MainSceneControl.candy_Explode,this.candy_ExplodeParent=this.selfScene.MainSceneControl.candy_ExplodeParent,this.scoreLabel=this.selfScene.MainSceneControl.scoreLabel,this.candyNameArr=this.selfScene.MainSceneControl.candyNameArr,this.timer=this.selfScene.MainSceneControl.timer,this.rewardWords=this.selfScene.MainSceneControl.rewardWords,this.timeSchedule=this.timer.getChildByName("timeSchedule"),this.timeSchedule.value=1,this.self.OperationControl=this},OperationButton.prototype.buttonClink=function(){for(var i=0;i<this.self._children.length;i++)this.self._children[i].on(Laya.Event.MOUSE_DOWN,this,this.down),this.self._children[i].on(Laya.Event.MOUSE_MOVE,this,this.move),this.self._children[i].on(Laya.Event.MOUSE_UP,this,this.up),this.self._children[i].on(Laya.Event.MOUSE_OUT,this,this.out)},OperationButton.prototype.down=function(event){if(this.operateSwitch){switch(this.clicksCount++,event.currentTarget.name){case"redButton":this.clicksNameArr.push("redCandy___");break;case"yellowButton":this.clicksNameArr.push("yellowCandy");break;case"greenButton":this.clicksNameArr.push("greenCandy_");break;case"blueButton":this.clicksNameArr.push("blueCandy__")}this.clicksCount%2==0&&this.clicksCount>=2?this.clickTwoCompareName():this.clickOneCompareName(),this.clicksCount===2*this.selfScene.MainSceneControl.startRow&&this.settlement(),event.currentTarget.scale(.9,.9)}},OperationButton.prototype.clickTwoCompareName=function(){for(var nameArr=[],i=0;i<this.candyParent._children.length;i++){var candy=this.candyParent._children[i];if(candy.Candy.group===(this.clicksCount-2)/2){nameArr.push(candy.name);var firstCandy=this.candyParent.getChildByName(nameArr[0]);if(nameArr.length>=2)[nameArr[0].substring(0,11),nameArr[1].substring(0,11)].sort().toString()===this.clicksNameArr.sort().toString()?(this.rightAndWrongShow("right",firstCandy),this.rightAndWrongShow("right",candy),this.rightName.push(nameArr[0],nameArr[1])):(this.rightAndWrongShow("wrong",firstCandy),this.rightAndWrongShow("wrong",candy),this.errorName.push(nameArr[0],nameArr[1])),this.alreadyGroup.push(candy.Candy.group)}}this.clickHint(),this.clicksNameArr=[]},OperationButton.prototype.clickOneCompareName=function(){for(var nameArr=[],i=0;i<this.candyParent._children.length;i++){var candy=this.candyParent._children[i];if(candy.Candy.group===(this.clicksCount-1)/2){if(candy.name.substring(0,11)===this.clicksNameArr[0]){this.rightAndWrongShow("right",candy);break}if(nameArr.push(candy.name),2===nameArr.length){var firstCandy=this.candyParent.getChildByName(nameArr[0]);this.rightAndWrongShow("wrong",firstCandy),this.rightAndWrongShow("wrong",candy),this.clicksNameArr=[],this.clicksCount++,this.errorName.push(nameArr[0],nameArr[1]),this.alreadyGroup.push(candy.Candy.group),this.clickHint()}}}},OperationButton.prototype.rightAndWrongShow=function(rightAndWrong,candy){var originImg=candy.getChildByName("img");originImg&&originImg.removeSelf();var nowImg=new Laya.Image;if("right"==rightAndWrong)nowImg.skin="candy/ui/正确提示.png";else{if("wrong"!=rightAndWrong)return;nowImg.skin="candy/ui/错误提示.png"}nowImg.pivotX=nowImg.width/2,nowImg.pivotY=nowImg.height/2,nowImg.name="img",nowImg.scaleX=1,nowImg.scaleY=1,candy.addChild(nowImg),candy.x<Laya.stage.width/2?nowImg.pos(-20,50):nowImg.pos(20+candy.width,50)},OperationButton.prototype.clickHint=function(){for(var i=0;i<this.candyParent._children.length;i++){var presentGroup=this.alreadyGroup[this.alreadyGroup.length-1],candy=this.candyParent._children[i],candyGroup=candy.Candy.group;0===this.alreadyGroup.length?0===candyGroup&&candy.scale(1.1,1.1):(candyGroup===presentGroup&&candy.scale(1,1),candyGroup===presentGroup+1&&candy.scale(1.1,1.1))}},OperationButton.prototype.settlement=function(){if(this.operateSwitch=!1,this.rightName.length>0)for(var i=0;i<this.rightName.length;i++){(candy=this.candyParent.getChildByName(this.rightName[i])).x<Laya.stage.width/2?(candy.Candy.candyTagRole=this.selfScene.MainSceneControl.role_01,candy.Candy.candyFlyToRole()):(candy.Candy.candyTagRole=this.selfScene.MainSceneControl.role_02,candy.Candy.candyFlyToRole())}if(this.errorName.length>0)for(var j=0;j<this.errorName.length;j++){var candy=this.candyParent.getChildByName(this.errorName[j]);this.candybecomeEnemy(candy)}this.additionAward(),this.rightName=[],this.errorName=[],this.clicksCount=0,this.clicksNameArr=[],this.alreadyGroup=[],this.selfScene.MainSceneControl.candyLaunch_01.play("prepare",!1),this.selfScene.MainSceneControl.candyLaunch_02.play("prepare",!1)},OperationButton.prototype.timerControl=function(){if(this.timeSchedule.value>0&&this.operateSwitch)this.timeSchedule.value-=5e-4;else if(this.timeSchedule.value<=0&&this.operateSwitch){for(var groupArr=[0,1,2,3,4],i=0;i<this.alreadyGroup.length;i++)for(var j=0;j<groupArr.length;j++)this.alreadyGroup[i]===groupArr[j]&&groupArr.shift();for(var k=0;k<this.candyParent._children.length;k++)for(var candy=this.candyParent._children[k],l=0;l<groupArr.length;l++)candy.Candy.group===groupArr[l]&&this.candybecomeEnemy(candy);this.settlement()}},OperationButton.prototype.additionAward=function(){this.errorName.length>0||(this.timeSchedule.value>.8?this.creatRewardWords("干得漂亮"):this.timeSchedule.value>.6?this.creatRewardWords("太棒了"):this.timeSchedule.value>.4&&this.creatRewardWords("牛皮"))},OperationButton.prototype.creatRewardWords=function(word){var rewardWords=Laya.Pool.getItemByCreateFun("rewardWords",this.rewardWords.create,this.rewardWords);this.selfScene.addChild(rewardWords),rewardWords.RewardWords.createWordsAni(word)},OperationButton.prototype.candybecomeEnemy=function(candy){var point,explodeTarget;candy.x<Laya.stage.width/2?(explodeTarget=this.selfScene.MainSceneControl.role_01,point=new Laya.Point(candy.x-200,candy.y+80)):(explodeTarget=this.selfScene.MainSceneControl.role_02,point=new Laya.Point(candy.x+200,candy.y+80)),candy.Candy.skeleton&&candy.Candy.playSkeletonAni(4,"turnLeft"),this.flewToGround(candy,point,explodeTarget)},OperationButton.prototype.flewToGround=function(candy,targetP,explodeTarget){var HalfX,HalfY;HalfX=candy.x>Laya.stage.width/2?candy.x-(candy.x-targetP.x)/2:candy.x+(targetP.x-candy.x)/2,HalfY=candy.y-100,Laya.Tween.to(candy,{x:HalfX,y:HalfY,scaleX:1.3,scaleY:1.3},500,null,Laya.Handler.create(this,function(){Laya.Tween.to(candy,{x:targetP.x,y:targetP.y,scaleX:.9,scaleY:.9},400,null,Laya.Handler.create(this,function(){var explodeCandy=this.selfScene.MainSceneControl.createExplodeCandy(candy.name);explodeCandy.pos(candy.x,candy.y),explodeCandy.scale(.9,.9),this.selfScene.MainSceneControl.explodeAni(this.selfScene,explodeCandy.x,explodeCandy.y,"disappear",8,1e3),candy.removeSelf(),this.selfScene.MainSceneControl.explodeCandyzOrder(),Laya.Tween.to(candy,{},500,null,Laya.Handler.create(this,function(){explodeCandy.Candy_Explode.explodeTarget=explodeTarget},[]),0)},[]),0)},[]),0);var shadow=candy.getChildByName("shadow");Laya.Tween.to(shadow,{x:-20,y:80,scaleX:.8,scaleY:.8},300,null,Laya.Handler.create(this,function(){Laya.Tween.to(shadow,{x:0,y:0,scaleX:1,scaleY:1},500,null,Laya.Handler.create(this,function(){}),0)}),0)},OperationButton.prototype.move=function(event){event.currentTarget.scale(1,1)},OperationButton.prototype.up=function(event){event.currentTarget.scale(1,1)},OperationButton.prototype.out=function(event){event.currentTarget.scale(1,1)},OperationButton.prototype.onUpdate=function(){this.selfScene.MainSceneControl.gameOver?this.operateSwitch=!1:this.timerControl()},OperationButton.prototype.onDisable=function(){},OperationButton}(Laya.Script);exports.default=OperationButton},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Ranking=function(_super){function Ranking(){return _super.call(this)||this}return __extends(Ranking,_super),Ranking.prototype.onEnable=function(){this.init()},Ranking.prototype.init=function(){this.self=this.owner,this.background.alpha=0,this.background.width=Laya.stage.width,this.background.height=Laya.stage.height,this.content.x=Laya.stage.width/2,this.content.y=Laya.stage.height/2,this.content.scale(0,0),this.content.alpha=0,this.appear()},Ranking.prototype.onAwake=function(){Laya.Browser.onMiniGame&&Laya.loader.load(["res/atlas/rank.atlas"],Laya.Handler.create(null,function(){Laya.MiniAdpter.sendAtlasToOpenDataContext("res/atlas/rank.atlas"),Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"ranking"})}))},Ranking.prototype.appear=function(){Laya.Tween.to(this.content,{rotation:720,alpha:1,scaleX:1,scaleY:1},550,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.rotation=0,this.btnClikClink()},[]),0),Laya.Tween.to(this.background,{alpha:.5},550,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0)},Ranking.prototype.vanish=function(){this.self.pivotX=Laya.stage.width/2,this.self.pivotY=Laya.stage.height/2,this.self.x=Laya.stage.width/2,this.self.y=Laya.stage.height/2,Laya.Tween.to(this.self,{rotation:-720,alpha:0,scaleX:0,scaleY:0,x:1500},700,Laya.Ease.expoIn,Laya.Handler.create(this,function(){(this.self.removeSelf(),Laya.Browser.onMiniGame)&&Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"close"})},[]),0),Laya.Tween.to(this.background,{alpha:0},450,Laya.Ease.expoIn,Laya.Handler.create(this,function(){},[]),0)},Ranking.prototype.btnClikClink=function(){this.but_Close.on(Laya.Event.MOUSE_DOWN,this,this.down),this.but_Close.on(Laya.Event.MOUSE_MOVE,this,this.move),this.but_Close.on(Laya.Event.MOUSE_UP,this,this.up),this.but_Close.on(Laya.Event.MOUSE_OUT,this,this.out)},Ranking.prototype.btnCloseClink=function(){this.but_Close.off(Laya.Event.MOUSE_DOWN,this,this.down),this.but_Close.off(Laya.Event.MOUSE_MOVE,this,this.move),this.but_Close.off(Laya.Event.MOUSE_UP,this,this.up),this.but_Close.off(Laya.Event.MOUSE_OUT,this,this.out)},Ranking.prototype.down=function(event){this.but_Close.scale(.9,.9)},Ranking.prototype.move=function(event){this.but_Close.scale(.9,.9)},Ranking.prototype.up=function(event){this.but_Close.scale(1,1),this.vanish()},Ranking.prototype.out=function(event){this.but_Close.scale(1,1)},Ranking.prototype.onDisable=function(){},Ranking}(Laya.Script);exports.default=Ranking},{}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Resurgence=function(_super){function Resurgence(){return _super.call(this)||this}return __extends(Resurgence,_super),Resurgence.prototype.onEnable=function(){this.init()},Resurgence.prototype.init=function(){this.self=this.owner,this.self.pivotX=0,this.self.pivotY=0,this.self.x=this.self.pivotX,this.self.y=this.self.pivotY,this.selfScene=this.self.scene,this.background=this.self.getChildByName("background"),this.background.alpha=0,this.content=this.self.getChildByName("content"),this.content.alpha=0,this.resurgence_Btn=this.content.getChildByName("resurgence_Btn"),this.resurgence_Btn.x=-1200,this.digitalPlate=this.content.getChildByName("digitalPlate"),this.digitalPlate.x=1200,this.digital=this.content.getChildByName("digital"),this.digital.scaleX=0,this.digital.scaleY=0,this.digital.alpha=0,this.digital.value="5",this.timeLine=0,this.countdown=!1,this.hintWord=this.selfScene.MainSceneControl.hintWord,this.settlement=this.selfScene.MainSceneControl.settlement,Laya.timer.frameOnce(100,this,function(){this.appearAni()}),this.adaptive()},Resurgence.prototype.adaptive=function(){this.background.width=Laya.stage.width,this.background.height=Laya.stage.height,this.content.x=Laya.stage.width/2,this.content.y=Laya.stage.height/2,this.self.width=Laya.stage.width,this.self.height=Laya.stage.height,this.self.alpha=1,this.self.scale(1,1),this.self.rotation=0,this.self.x=0,this.self.y=0},Resurgence.prototype.appearAni=function(){Laya.Tween.to(this.content,{alpha:1},550,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.resurgence_Btn,{x:375,rotation:720},550,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.resurgence_Btn.rotation=0},[]),0),Laya.Tween.to(this.digitalPlate,{x:375,rotation:720},550,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.digitalPlate.rotation=0,this.resurgence_BtnClink()},[]),0),Laya.Tween.to(this.background,{alpha:.7},550,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.digital,{scaleX:1.2,scaleY:1.2,alpha:1},700,null,Laya.Handler.create(this,function(){this.countdown=!0},[]),0)},Resurgence.prototype.cutTnterface=function(type){this.self.pivotX=Laya.stage.width/2,this.self.pivotY=Laya.stage.height/2,this.self.x=this.self.pivotX,this.self.y=this.self.pivotY,Laya.Tween.to(this.self,{x:1500,rotation:720,scaleX:0,scaleY:0,alpha:0},700,Laya.Ease.expoIn,Laya.Handler.create(this,function(){"main"===type?(this.roleResurgenceAni(),this.self.removeSelf()):this.self.removeSelf()},[]),0),Laya.Tween.to(this.background,{alpha:0},450,Laya.Ease.expoIn,Laya.Handler.create(this,function(){},[]),0)},Resurgence.prototype.roleResurgenceAni=function(){var role_01=this.selfScene.MainSceneControl.role_01,role_02=this.selfScene.MainSceneControl.role_02;Laya.Tween.to(role_01,{alpha:1},700,null,Laya.Handler.create(this,function(){this.hintWordMove()},[]),0),Laya.Tween.to(role_02,{alpha:1},700,null,Laya.Handler.create(this,function(){},[]),0)},Resurgence.prototype.hintWordMove=function(){for(var delayed=0,MainSceneControl=this.selfScene.MainSceneControl,role_01=MainSceneControl.role_01,role_02=MainSceneControl.role_02,_loop_1=function(i){Laya.timer.frameOnce(delayed,this_1,function(){switch(i){case 0:MainSceneControl.createHintWord(role_01,"攻击里",20),MainSceneControl.createHintWord(role_02,"攻击里",20),role_01.Role.role_property.attackValue+=20,role_02.Role.role_property.attackValue+=20;break;case 1:MainSceneControl.createHintWord(role_01,"生命",1e3),MainSceneControl.createHintWord(role_02,"生命",1e3),role_01.Role.role_property.blood=1e3,role_02.Role.role_property.blood=1e3;break;case 2:MainSceneControl.createHintWord(role_01,"公鸡速度",20),MainSceneControl.createHintWord(role_02,"公鸡速度",20),role_01.Role.role_property.attackSpeed+=20,role_02.Role.role_property.attackSpeed+=20;break;case 3:MainSceneControl.createHintWord(role_01,"防御力",10),MainSceneControl.createHintWord(role_02,"防御力",10),role_01.Role.role_property.defense+=10,role_02.Role.role_property.defense+=10}3===i&&this.resurgenceProperties()}),delayed+=25},this_1=this,i=0;i<4;i++)_loop_1(i)},Resurgence.prototype.resurgenceProperties=function(){var MainSceneControl=this.selfScene.MainSceneControl;MainSceneControl.gameOver=!1,MainSceneControl.role_01.Role.roleDeath=!1,MainSceneControl.role_02.Role.roleDeath=!1,MainSceneControl.operating.OperationControl.operateSwitch=!0},Resurgence.prototype.resurgence_BtnClink=function(){this.resurgence_Btn.on(Laya.Event.MOUSE_DOWN,this,this.down),this.resurgence_Btn.on(Laya.Event.MOUSE_MOVE,this,this.move),this.resurgence_Btn.on(Laya.Event.MOUSE_UP,this,this.up),this.resurgence_Btn.on(Laya.Event.MOUSE_OUT,this,this.out)},Resurgence.prototype.down=function(event){event.currentTarget.scale(.95,.95)},Resurgence.prototype.move=function(event){event.currentTarget.scale(1,1)},Resurgence.prototype.up=function(event){event.currentTarget.scale(1,1),this.countdown=!1,this.cutTnterface("main")},Resurgence.prototype.out=function(event){event.currentTarget.scale(1,1)},Resurgence.prototype.createSettlement=function(){this.selfScene.MainSceneControl.wxPostData(),Laya.timer.frameOnce(20,this,function(){var settlement=Laya.Pool.getItemByCreateFun("settlement",this.settlement.create,this.settlement);this.selfScene.addChild(settlement),settlement.pos(0,0)})},Resurgence.prototype.onUpdate=function(){this.countdown&&(this.timeLine++,this.timeLine%60==0?(this.digital.value=(Number(this.digital.value)-1).toString(),this.digital.scale(1,1),"-1"===this.digital.value&&(this.countdown=!1,this.createSettlement(),this.cutTnterface("settlement"))):(this.digital.scaleX-=.003,this.digital.scaleY-=.003))},Resurgence.prototype.onDisable=function(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this),Laya.Pool.recover("resurgence",this.self)},Resurgence}(Laya.Script);exports.default=Resurgence},{}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var RewardWords=function(_super){function RewardWords(){return _super.call(this)||this}return __extends(RewardWords,_super),RewardWords.prototype.onEnable=function(){this.initProperty()},RewardWords.prototype.initProperty=function(){this.self=this.owner,this.self.RewardWords=this,this.selfScene=this.self.scene,this.self.alpha=0,this.locationY=2*Laya.stage.height/5,this.self.y=this.locationY,this.self.pivotX=this.self.width/2,this.self.pivotY=this.self.height/2,this.scoreLabel=this.selfScene.MainSceneControl.scoreLabel,this.self.x=1200,this.self.alpha=0,this.hintWord=this.selfScene.MainSceneControl.hintWord},RewardWords.prototype.createWordsAni=function(word){var wordImg;switch(this.self.getChildByName("word")?wordImg=this.self.getChildByName("word"):(wordImg=new Laya.Image,this.self.addChild(wordImg)),wordImg.name="word",word){case"牛皮":wordImg.skin="candy/提示文字/牛皮.png",wordImg.pos(150,20),this.addScoreNumber=500;break;case"太棒了":wordImg.skin="candy/提示文字/太棒了.png",wordImg.pos(105,20),this.addScoreNumber=1e3;break;case"干得漂亮":wordImg.skin="candy/提示文字/干得漂亮.png",wordImg.pos(55,20),this.addScoreNumber=2e3}this.wordsType=word,this.RewardWordsMove()},RewardWords.prototype.RewardWordsMove=function(){var standingTime;switch(this.wordsType){case"牛皮":standingTime=1600;break;case"太棒了":standingTime=2e3;break;case"干得漂亮":standingTime=2400;break;default:standingTime=1600}var baseboard=new Laya.Image;baseboard.skin="candy/ui/文字提示底.png",this.selfScene.addChild(baseboard),baseboard.pos(-800,this.locationY),baseboard.anchorX=.5,baseboard.anchorY=.5,baseboard.alpha=0,baseboard.scale(0,0),baseboard.zOrder=100,this.self.zOrder=110;var timeLine_baseboard_01=new Laya.TimeLine;timeLine_baseboard_01.addLabel("overturn_01",0).to(baseboard,{scaleX:1,scaleY:1,x:Laya.stage.width/2,rotation:360,alpha:1},400,null,0),timeLine_baseboard_01.play("overturn_01",!1),timeLine_baseboard_01.on(Laya.Event.COMPLETE,this,function(){this.letOffFireworks();var timeLine_baseboard_02=new Laya.TimeLine;timeLine_baseboard_02.addLabel("pause",0).to(baseboard,{},standingTime,null,0).addLabel("vanish_01",0).to(baseboard,{scaleX:.2,scaleY:.2,x:800,rotation:-360,alpha:0},650,Laya.Ease.circInOut,0),timeLine_baseboard_02.play("pause",!1),timeLine_baseboard_02.on(Laya.Event.COMPLETE,this,function(){baseboard.removeSelf()})}),Laya.timer.frameOnce(150,this,function(){this.addScoreAni()});var timeLine_self=new Laya.TimeLine;timeLine_self.addLabel("appear",-300).to(this.self,{rotation:360,x:Laya.stage.width/2,alpha:1},550,null,0).addLabel("pause",0).to(this.self,{x:Laya.stage.width/2},standingTime-400,null,0).addLabel("vanish_02",0).to(this.self,{rotation:-720,x:-1200},650,Laya.Ease.circInOut,0),timeLine_self.play("appear",!1),timeLine_self.on(Laya.Event.COMPLETE,this,function(){this.self.removeSelf()})},RewardWords.prototype.letOffFireworks=function(){var count,delayed=0;switch(this.wordsType){case"牛皮":count=5;break;case"太棒了":count=7;break;case"干得漂亮":count=10;break;default:count=6}for(var _loop_1=function(i){Laya.timer.frameOnce(delayed,this_1,function(){var locationX_01,randomX=Math.floor(100*Math.random());locationX_01=i%2!=0?Laya.stage.width/2+50+randomX:Laya.stage.width/2-50-randomX,this.selfScene.MainSceneControl.explodeAni(this.selfScene,locationX_01,this.locationY,"fireworks",20,105)}),delayed+=15},this_1=this,i=0;i<count;i++)_loop_1(i)},RewardWords.prototype.addScoreAni=function(){var hintWord=Laya.Pool.getItemByCreateFun("candy",this.hintWord.create,this.hintWord);this.selfScene.addChild(hintWord),hintWord.zOrder=110,hintWord.pos(Laya.stage.width/2,this.locationY);hintWord.HintWord.initProperty("增加分数",this.addScoreNumber)},RewardWords.prototype.onDisable=function(){Laya.Pool.recover("rewardWords",this.self)},RewardWords}(Laya.Script);exports.default=RewardWords},{}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Role=function(_super){function Role(){return _super.call(this)||this}return __extends(Role,_super),Role.prototype.onEnable=function(){this.initProperty(),this.bucketClink(),this.createBoneAni()},Role.prototype.initProperty=function(){this.self=this.owner,this.selfHealth=this.self.getChildByName("health"),this.selfHealth.value=1,this.propertyShow=this.self.getChildByName("propertyShow"),this.propertyShow.alpha=0,this.bloodLabel=this.selfHealth.getChildByName("bloodLabel"),this.self.Role=this,this.selfScene=this.self.scene,this.candyParent=this.selfScene.MainSceneControl.candyParent,this.scoreLabel=this.selfScene.MainSceneControl.scoreLabel,this.nowTime=Date.now(),this.roleDeath=!1,this.rolePropertySet()},Role.prototype.createBoneAni=function(){this.templet=new Laya.Templet,this.templet.on(Laya.Event.COMPLETE,this,this.parseComplete),this.templet.on(Laya.Event.ERROR,this,this.onError),"role_01"===this.self.name?this.templet.loadAni("candy/主角/role_01.sk"):"role_02"===this.self.name&&this.templet.loadAni("candy/主角/role_02.sk")},Role.prototype.onError=function(){console.log("骨骼动画加载错误")},Role.prototype.parseComplete=function(){this.skeleton=this.templet.buildArmature(0),this.skeletonListen(),this.self.addChild(this.skeleton),this.skeleton.play("speak",!0),this.skeleton.name="skeleton","role_01"===this.self.name?(this.skeleton.x=60,this.skeleton.y=72):"role_02"===this.self.name&&(this.skeleton.x=60,this.skeleton.y=72)},Role.prototype.skeletonListen=function(){this.skeleton.on(Laya.Event.LABEL,this,function(e){"hitOut"===e.name&&this.createBullet()}),this.skeleton.on(Laya.Event.COMPLETE,this,function(e){console.log(e)})},Role.prototype.createBullet=function(){var bullet=Laya.Pool.getItemByCreateFun("roleBullet",this.roleBullet.create,this.roleBullet);this.bulletParent.addChild(bullet),bullet.pos(this.self.x,this.self.y);var pic=bullet.getChildByName("pic");"role_01"===this.self.name?pic.skin="candy/主角/主角1子弹.png":"role_02"===this.self.name&&(pic.skin="candy/主角/主角2子弹.png"),this.lockedBulletTarget(bullet),bullet.Bullet.belongRole=this.self},Role.prototype.playSpeedAdjust=function(){var playSpeed;playSpeed=(500-this.role_property.attackSpeed)/500>0?1+(500-this.role_property.attackSpeed)/500:1,this.skeleton.playbackRate(playSpeed)},Role.prototype.onsetAttack=function(){this.skeleton.play("attack",!1),this.playSpeedAdjust()},Role.prototype.rolePropertySet=function(){"role_01"===this.self.name?this.role_property={blood:2e3,attackValue:100,attackSpeed:200,defense:15}:"role_02"===this.self.name&&(this.role_property={blood:2e3,attackValue:100,attackSpeed:200,defense:15})},Role.prototype.updateProperty=function(){this.bloodLabel.text=this.role_property.blood,this.propertyShow.getChildByName("blood").text="血量: "+this.role_property.blood,this.propertyShow.getChildByName("attackValue").text="攻击力: "+this.role_property.attackValue,this.propertyShow.getChildByName("attackSpeed").text="攻击速度: "+this.role_property.attackSpeed,this.propertyShow.getChildByName("defense").text="防御力: "+this.role_property.defense},Role.prototype.bucketClink=function(){this.self.on(Laya.Event.MOUSE_DOWN,this,this.down),this.self.on(Laya.Event.MOUSE_MOVE,this,this.move),this.self.on(Laya.Event.MOUSE_UP,this,this.up),this.self.on(Laya.Event.MOUSE_OUT,this,this.out)},Role.prototype.down=function(event){},Role.prototype.move=function(event){},Role.prototype.up=function(){this.self.scale(1,1)},Role.prototype.out=function(){this.self.scale(1,1)},Role.prototype.lockedBulletTarget=function(bullet){for(var distanceArr=[],enemyParent=this.selfScene.MainSceneControl.enemyParent,i=0;i<enemyParent._children.length;i++){var enemy=enemyParent._children[i],dx=enemy.x-this.self.x,dy=enemy.y-this.self.y,object={distance:Math.sqrt(dx*dx+dy*dy),name:enemy.name};distanceArr.push(object)}if(distanceArr.sort(function(obj1,obj2){var val1=obj1.distance,val2=obj2.distance;return val1<val2?-1:val1>val2?1:0}),distanceArr.length>0){var target=enemyParent.getChildByName(distanceArr[0].name);bullet.Bullet.bulletTarget=target,bullet.Bullet.bulletTargetName=target.name}},Role.prototype.onUpdate=function(){if(!this.roleDeath){this.role_property.blood<=0&&(this.role_property.blood=0,"role_01"===this.self.name?(this.roleDeath=!0,this.self.alpha=0):"role_02"===this.self.name&&(this.roleDeath=!0,this.self.alpha=0)),this.updateProperty();var nowTime=Date.now();this.skeleton&&this.role_Warning&&nowTime-this.nowTime>this.role_property.attackSpeed&&this.role_Warning&&(this.onsetAttack(),this.nowTime=nowTime)}},Role.prototype.onDisable=function(){},Role}(Laya.Script);exports.default=Role},{}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MainSceneControl_1=require("./MainSceneControl"),Bullet=function(_super){function Bullet(){return _super.call(this)||this}return __extends(Bullet,_super),Bullet.prototype.onEnable=function(){this.init()},Bullet.prototype.init=function(){this.self=this.owner,this.selfScene=this.self.scene,this.mainSceneControl=this.selfScene.getComponent(MainSceneControl_1.default),this.enemyParent=this.mainSceneControl.enemyParent,this.hintWord=this.mainSceneControl.hintWord,this.selfSpeed=15,this.role_01=this.selfScene.MainSceneControl.role_01,this.attackValue=this.role_01.Role.role_property.attackValue,this.self.Bullet=this},Bullet.prototype.bulletMove=function(){var point;this.bulletTarget&&this.bulletTarget.parent&&this.bulletTargetName===this.bulletTarget.name?((point=new Laya.Point(this.bulletTarget.x-this.self.x,this.bulletTarget.y-this.self.y)).normalize(),this.self.x+=point.x*this.selfSpeed,this.self.y+=point.y*this.selfSpeed):((point=new Laya.Point(this.self.x-this.belongRole.x,this.self.y-this.belongRole.y)).normalize(),0===point.x&&this.self.removeSelf(),this.self.x+=point.x*this.selfSpeed,this.self.y+=point.y*this.selfSpeed)},Bullet.prototype.onUpdate=function(){if(this.bulletMove(),(this.self.x>750+this.self.width+50||this.self.x<-this.self.width)&&this.self.removeSelf(),this.self.y<=1*Laya.stage.width/3)this.self.removeSelf();else for(var i=0;i<this.enemyParent._children.length;i++){var enemy=this.enemyParent._children[i],differenceX=Math.abs(enemy.x-this.self.x),differenceY=Math.abs(enemy.y-this.self.y);differenceX<10&&differenceY<10&&("enemy"===enemy.name.substring(0,5)?this.attackEnemy(enemy):this.attackCandy_Explode(enemy),this.self.removeSelf())}},Bullet.prototype.attackEnemy=function(enemy){var damage=this.attackValue-enemy.Enemy.enemyProperty.defense;damage>0?enemy.Enemy.enemyProperty.blood-=damage:damage=0,enemy.Enemy.repelTimer=2},Bullet.prototype.attackCandy_Explode=function(enemy){enemy.getChildByName("health").value-=3.4},Bullet.prototype.hintWordMove=function(enemy,damage){if(null!==enemy.parent){var hintWord=Laya.Pool.getItemByCreateFun("candy",this.hintWord.create,this.hintWord);hintWord.pos(100,-150),enemy.addChild(hintWord);hintWord.HintWord.initProperty("主角掉血",damage)}},Bullet.prototype.onDisable=function(){Laya.Pool.recover("bullet",this.self)},Bullet}(Laya.Script);exports.default=Bullet},{"./MainSceneControl":10}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Settlement=function(_super){function Settlement(){return _super.call(this)||this}return __extends(Settlement,_super),Settlement.prototype.onEnable=function(){this.init()},Settlement.prototype.init=function(){this.self=this.owner,this.selfScene=this.self.scene,this.background=this.self.getChildByName("background"),this.content=this.self.getChildByName("content"),this.background.alpha=0,this.operation=this.content.getChildByName("operation"),this.operation.x=-1200,this.operation.alpha=0,this.btn_Return=this.operation.getChildByName("btn_Return"),this.btn_Again=this.operation.getChildByName("btn_Again"),this.GOLogo=this.content.getChildByName("GOLogo"),this.GOLogo.x=1200,this.GOLogo.alpha=0,this.scoreLabel=this.selfScene.MainSceneControl.scoreLabel,this.score=this.selfScene.MainSceneControl.score,this.timeLine=0,this.btnAniSwich=!0,this.btnAniTime=Date.now(),this.btnAniInterval=3e3,this.adaptive(),this.appearAni()},Settlement.prototype.adaptive=function(){this.background.width=Laya.stage.width,this.background.height=Laya.stage.height,this.content.x=Laya.stage.width/2,this.content.y=Laya.stage.height/2-50,this.self.width=Laya.stage.width,this.self.height=Laya.stage.height,this.self.x=0,this.self.y=0},Settlement.prototype.appearAni=function(){Laya.Tween.to(this.operation,{x:375,rotation:720,alpha:1},550,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.operation.rotation=0},[]),0),Laya.Tween.to(this.GOLogo,{x:375,rotation:720,alpha:1},550,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.GOLogo.rotation=0,this.GOLogoAni()},[]),0),Laya.Tween.to(this.background,{alpha:.8},550,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0),this.scoreAni()},Settlement.prototype.scoreAni=function(){var score=Laya.Pool.getItemByCreateFun("score",this.score.create,this.score);score.getChildByName("scoreLabel").value=this.scoreLabel.value,this.self.addChild(score),score.pos(Laya.stage.width/2,0),score.pivotX=score.width/2,score.pivotY=score.height/2,Laya.Tween.to(score,{x:375,y:this.content.y-200,rotation:720},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.btnClink()},[]),0)},Settlement.prototype.cutTnterface=function(type){this.self.pivotX=Laya.stage.width/2,this.self.pivotY=Laya.stage.height/2,this.self.x=this.self.pivotX,this.self.y=this.self.pivotY,Laya.Tween.to(this.self,{x:1500,rotation:720,scaleX:0,scaleY:0,alpha:0},700,Laya.Ease.expoIn,Laya.Handler.create(this,function(){this.self.removeSelf(),"restart"===type?this.selfScene.MainSceneControl.restart():"returnStart"===type&&(this.selfScene.MainSceneControl.returnStartSet(),this.selfScene.MainSceneControl.createStartInterface("returnStart"))},[]),0),Laya.Tween.to(this.background,{alpha:0},450,Laya.Ease.expoIn,Laya.Handler.create(this,function(){},[]),0)},Settlement.prototype.GOLogoAni=function(){Laya.Tween.to(this.GOLogo,{alpha:.5},800,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.GOLogo,{alpha:1},800,null,Laya.Handler.create(this,function(){this.GOLogoAni()},[]),0)},[]),0)},Settlement.prototype.btnAni=function(){Laya.Tween.to(this.btn_Return,{scaleX:.95,scaleY:.95},100,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.btn_Return,{scaleX:1.05,scaleY:1.05},100,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.btn_Return,{scaleX:1,scaleY:1},100,null,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.btn_Again,{scaleX:.95,scaleY:.95},100,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.btn_Again,{scaleX:1.05,scaleY:1.05},100,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.btn_Again,{scaleX:1,scaleY:1},100,null,Laya.Handler.create(this,function(){},[]),0)},[]),0)},[]),0)},[]),0)},[]),0)},Settlement.prototype.btnClink=function(){this.btn_Again.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_Again.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_Again.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_Again.on(Laya.Event.MOUSE_OUT,this,this.out),this.btn_Return.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_Return.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_Return.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_Return.on(Laya.Event.MOUSE_OUT,this,this.out)},Settlement.prototype.down=function(event){Laya.timer.pause(),event.currentTarget.scale(.95,.95)},Settlement.prototype.move=function(event){event.currentTarget.scale(1,1)},Settlement.prototype.up=function(event){event.currentTarget.scale(1,1),"btn_Again"===event.currentTarget.name?this.cutTnterface("restart"):"btn_Return"===event.currentTarget.name&&this.cutTnterface("returnStart"),Laya.timer.resume(),Laya.Tween.clearTween(this.GOLogo)},Settlement.prototype.out=function(event){Laya.timer.resume(),event.currentTarget.scale(1,1)},Settlement.prototype.onUpdate=function(){var time=Date.now();this.btnAniSwich&&time-this.btnAniTime>this.btnAniInterval&&(this.btnAniTime=time,this.btnAni())},Settlement.prototype.onDisable=function(){Laya.Tween.clearAll(this)},Settlement}(Laya.Script);exports.default=Settlement},{}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var startGame=function(_super){function startGame(){return _super.call(this)||this}return __extends(startGame,_super),startGame.prototype.onEnable=function(){this.init()},startGame.prototype.aniTypeInit=function(type){"start"===type?this.startAniInit():"returnStart"===type&&this.returnStartInit()},startGame.prototype.init=function(){this.self=this.owner,this.selfScene=this.self.scene,this.self.startGame=this,this.LoGo.zOrder=1e3,this.starSwich=!0,this.starTime=Date.now(),this.starInterval=25,this.startBSwitch=null,this.startBInterval=null,this.startBTime=Date.now(),this.startBNum=0;var heightL=Laya.stage.height;this.antiAddiction.y=7.2*heightL/8+(this.self.height-heightL)/2,this.ranking=this.selfScene.MainSceneControl.ranking},startGame.prototype.startAniInit=function(){this.bg_01.x=187,this.bg_01.y=410,this.bg_02.x=562,this.bg_02.y=410,this.bg_03.x=187,this.bg_03.y=1230,this.bg_04.x=562,this.bg_04.y=1230,this.bg_Pure.alpha=1,this.btn_Start.x=-1500,this.btn_Start.alpha=0,this.btn_Start.scale(0,0),this.LoGo.x=1500,this.LoGo.alpha=0,this.LoGo.scale(0,0),this.antiAddiction.alpha=0,this.btn_Participate.alpha=0,this.btn_Participate.scale(0,0),this.btn_Ranking.alpha=0,this.btn_Ranking.scale(0,0),this.startAni()},startGame.prototype.startAni=function(){Laya.Tween.to(this.LoGo,{x:375,rotation:1080,alpha:1,scaleX:1,scaleY:1},700,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.LoGo.rotation=0,this.starInterval=300},[]),0),Laya.Tween.to(this.btn_Start,{x:375,rotation:-1080,alpha:1,scaleX:1,scaleY:1},700,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.btn_Start.rotation=0,this.buttonAppear(),this.startBSwitch=!0,this.startBInterval=0,Laya.Tween.to(this.antiAddiction,{alpha:1},200,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0)},[]),0)},startGame.prototype.buttonAppear=function(){Laya.Tween.to(this.btn_Ranking,{alpha:1,scaleX:1,scaleY:1,rotation:720},350,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.btn_Participate,{alpha:1,scaleX:1,scaleY:1,rotation:-720},350,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.btnClink()},[]),0)},[]),0)},startGame.prototype.vanishAni=function(){this.bg_Pure.alpha=0,this.LoGo.alpha=0,this.btn_Start.alpha=0,this.btn_Ranking.alpha=0,this.btn_Participate.alpha=0,Laya.Tween.to(this.antiAddiction,{alpha:0},200,Laya.Ease.expoIn,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.bg_01,{x:-1500,alpha:0,scaleX:0,scaleY:0,rotation:-720},800,Laya.Ease.expoIn,Laya.Handler.create(this,function(){this.bg_01.rotation=0,this.self.removeSelf(),this.selfScene.MainSceneControl.startGame()},[]),0),Laya.Tween.to(this.bg_02,{x:1500,alpha:0,scaleX:0,scaleY:0,rotation:-720},800,Laya.Ease.expoIn,Laya.Handler.create(this,function(){this.bg_02.rotation=0},[]),0),Laya.Tween.to(this.bg_03,{x:-1500,alpha:0,scaleX:0,scaleY:0,rotation:-720},800,Laya.Ease.expoIn,Laya.Handler.create(this,function(){this.bg_03.rotation=0},[]),0),Laya.Tween.to(this.bg_04,{x:1500,alpha:0,scaleX:0,scaleY:0,rotation:-720},800,Laya.Ease.expoIn,Laya.Handler.create(this,function(){this.bg_04.rotation=0},[]),0)},startGame.prototype.returnStartInit=function(){this.bg_01.x=-1500,this.bg_01.alpha=0,this.bg_02.x=1500,this.bg_02.alpha=0,this.bg_03.x=-1500,this.bg_03.alpha=0,this.bg_04.x=1500,this.bg_04.alpha=0,this.bg_Pure.alpha=0,this.btn_Start.x=375,this.btn_Start.alpha=0,this.btn_Start.scale(1,1),this.LoGo.x=375,this.LoGo.alpha=0,this.LoGo.scale(1,1),this.antiAddiction.alpha=0,this.btn_Participate.alpha=0,this.btn_Participate.scale(1,1),this.btn_Ranking.alpha=0,this.btn_Ranking.scale(1,1),this.returnStartAni()},startGame.prototype.returnStartAni=function(){this.bg_01.x=187,this.bg_01.y=410,this.bg_02.x=562,this.bg_02.y=410,this.bg_03.x=187,this.bg_03.y=1230,this.bg_04.x=562,this.bg_04.y=1230,Laya.Tween.to(this.bg_01,{x:187,alpha:1,scaleX:1,scaleY:1,rotation:-720},800,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.bg_Pure.alpha=1,this.LoGo.alpha=1,this.btn_Ranking.alpha=1,this.btn_Participate.alpha=1,this.bg_01.rotation=0,this.btn_Start.scale(.1,.1),this.starInterval=300,Laya.Tween.to(this.btn_Start,{alpha:1,scaleX:1,scaleY:1,rotation:0},200,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.startBSwitch=!0,this.startBInterval=0,this.btnClink(),Laya.Tween.to(this.antiAddiction,{alpha:1},200,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0)},[]),0)},[]),0),Laya.Tween.to(this.bg_02,{x:562,alpha:1,scaleX:1,scaleY:1,rotation:720},800,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.bg_02.rotation=0},[]),0),Laya.Tween.to(this.bg_03,{x:187,alpha:1,scaleX:1,scaleY:1,rotation:720},800,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.bg_03.rotation=0},[]),0),Laya.Tween.to(this.bg_04,{x:562,alpha:1,scaleX:1,scaleY:1,rotation:-720},800,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.bg_04.rotation=0},[]),0)},startGame.prototype.starShiningEffect=function(){var x1,y1,insideW=this.LoGo.width-20,insideH=this.LoGo.height-20,originX1=this.LoGo.x-insideW/2-50,originY1=this.LoGo.y-insideH/2-20;do{x1=originX1+Math.random()*(insideW+100)}while(Math.abs(x1-this.LoGo.x)<insideW/2);y1=originY1+Math.random()*insideH+20;var x2,y2,x,y,originX2=this.LoGo.x-insideW/2,originY2=this.LoGo.y-insideH/2-20;x2=originX2+Math.random()*insideW;do{y2=originY2+Math.random()*(insideH+40)}while(Math.abs(y2-this.LoGo.y)<insideH/2);0===Math.floor(3*Math.random())?(x=x1,y=y1):(x=x2,y=y2);this.LoGo.zOrder;this.selfScene.MainSceneControl.explodeAni(this.starParent,x,y,"starShining",1,100)},startGame.prototype.starVanish=function(){this.starSwich=!1,Laya.Tween.to(this.starParent,{alpha:0},100,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.starParent.removeChildren(0,this.starParent._children.length-1)},[]),0)},startGame.prototype.startBtnAni=function(){this.startBInterval=1050,Laya.Tween.to(this.btn_Start,{rotation:-5},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.btn_Start,{rotation:5},500,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.clearTween(this.btn_Start),this.startBNum++,this.startBNum%5==0&&(this.wholeAni(),this.startBSwitch=!1)},[]),0)},[]),0)},startGame.prototype.wholeAni=function(){Laya.Tween.to(this.btn_Start,{rotation:360},800,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){this.btn_Start.rotation=0,this.startBSwitch=!0},[]),0),Laya.Tween.to(this.LoGo,{y:this.LoGo.y-100},400,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.LoGo,{y:this.LoGo.y+100},400,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0)},[]),0),Laya.Tween.to(this.btn_Participate,{y:this.btn_Participate.y+100},400,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.btn_Participate,{y:this.btn_Participate.y-100},400,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0)},[]),0),Laya.Tween.to(this.btn_Ranking,{y:this.btn_Ranking.y+100},400,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.btn_Ranking,{y:this.btn_Ranking.y-100},400,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){},[]),0)},[]),0)},startGame.prototype.createRing=function(){this.btnClink();var ranking=Laya.Pool.getItemByCreateFun("ranking",this.ranking.create,this.ranking);this.selfScene.addChild(ranking),ranking.pos(0,0)},startGame.prototype.btnClink=function(){this.btn_Start.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_Start.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_Start.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_Start.on(Laya.Event.MOUSE_OUT,this,this.out),this.btn_Ranking.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_Ranking.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_Ranking.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_Ranking.on(Laya.Event.MOUSE_OUT,this,this.out),this.btn_Participate.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_Participate.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_Participate.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_Participate.on(Laya.Event.MOUSE_OUT,this,this.out)},startGame.prototype.closeBtnClink=function(){this.btn_Start.off(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_Start.off(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_Start.off(Laya.Event.MOUSE_UP,this,this.up),this.btn_Start.off(Laya.Event.MOUSE_OUT,this,this.out),this.btn_Ranking.off(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_Ranking.off(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_Ranking.off(Laya.Event.MOUSE_UP,this,this.up),this.btn_Ranking.off(Laya.Event.MOUSE_OUT,this,this.out),this.btn_Participate.off(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_Participate.off(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_Participate.off(Laya.Event.MOUSE_UP,this,this.up),this.btn_Participate.off(Laya.Event.MOUSE_OUT,this,this.out)},startGame.prototype.down=function(event){event.currentTarget.scale(.95,.95),Laya.timer.pause()},startGame.prototype.move=function(event){Laya.timer.resume(),event.currentTarget.scale(1,1)},startGame.prototype.up=function(event){event.currentTarget.scale(1,1),"btn_Start"===event.currentTarget.name?(this.closeBtnClink(),this.starVanish(),this.vanishAni()):"btn_Participate"===event.currentTarget.name?this.selfScene.MainSceneControl.wxShare():"btn_Ranking"===event.currentTarget.name&&this.createRing(),Laya.timer.resume()},startGame.prototype.out=function(event){Laya.timer.resume(),event.currentTarget.scale(1,1)},startGame.prototype.onUpdate=function(){var time=Date.now();this.starSwich&&time-this.starInterval>this.starTime&&(this.starTime=time,this.starShiningEffect()),this.startBSwitch&&time-this.startBInterval>this.startBTime&&(this.startBTime=time,this.startBtnAni())},startGame.prototype.onDisable=function(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)},startGame}(Laya.Script);exports.default=startGame},{}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Suspend=function(_super){function Suspend(){return _super.call(this)||this}return __extends(Suspend,_super),Suspend.prototype.onEnable=function(){this.init(),this.bucketClink()},Suspend.prototype.init=function(){this.self=this.owner,this.selfScene=this.self.scene,this.roleParent=this.selfScene.MainSceneControl.roleParent,this.enemyParent=this.selfScene.MainSceneControl.enemyParent,this.press=this.self.getChildByName("press"),this.notPress=this.self.getChildByName("notPress"),this.press.visible=!1,this.notPress.visible=!0},Suspend.prototype.bucketClink=function(){this.self.on(Laya.Event.MOUSE_DOWN,this,this.down),this.self.on(Laya.Event.MOUSE_MOVE,this,this.move),this.self.on(Laya.Event.MOUSE_UP,this,this.up),this.self.on(Laya.Event.MOUSE_OUT,this,this.out)},Suspend.prototype.down=function(event){this.press.visible=!0,this.notPress.visible=!1;var suspend=this.selfScene.MainSceneControl.suspend;this.selfScene.MainSceneControl.suspend=!suspend;for(var i=0;i<this.enemyParent._children.length;i++){(propertyShow=this.enemyParent._children[i].getChildByName("propertyShow")).alpha=suspend?0:1}for(i=0;i<this.roleParent._children.length;i++){var propertyShow=this.roleParent._children[i].getChildByName("propertyShow");suspend?(this.selfScene.MainSceneControl.suspend=!1,propertyShow.alpha=0):(this.selfScene.MainSceneControl.suspend=!0,propertyShow.alpha=1)}},Suspend.prototype.move=function(event){this.press.visible=!0,this.notPress.visible=!1},Suspend.prototype.up=function(){this.press.visible=!1,this.notPress.visible=!0,this.self.scale(1,1)},Suspend.prototype.out=function(){this.press.visible=!1,this.notPress.visible=!0,this.self.scale(1,1)},Suspend.prototype.suspendedState=function(){},Suspend.prototype.onDisable=function(){},Suspend}(Laya.Script);exports.default=Suspend},{}],20:[function(require,module,exports){"use strict";var tools;Object.defineProperty(exports,"__esModule",{value:!0}),function(tools){function getDiffEle(arr,result,place){for(var indexArr=[],i=0;i<arr.length-place;i++)indexArr.push(i);var ranIndex=Math.floor(Math.random()*indexArr.length);if(-1===result.indexOf(arr[ranIndex])){var backNum=arr[ranIndex];return arr[ranIndex]=arr[indexArr.length-1],backNum}return arr.splice(ranIndex,1),getDiffEle(arr,result,place)}tools.random=function(n,m){var c=(m=m||10)-n+1;return Math.floor(Math.random()*c+n)},tools.getRandomArrayElements=function(arr,count){for(var temp,index,shuffled=arr.slice(0),i=arr.length,min=i-count;i-- >min;)temp=shuffled[index=Math.floor((i+1)*Math.random())],shuffled[index]=shuffled[i],shuffled[i]=temp;return shuffled.slice(min)},tools.getArrayDifElements=function(arr,count){for(var result=[],i=0;i<count;i++){var temp=getDiffEle(arr.slice(),result,i);result.push(temp)}return result},tools.getDiffEle=getDiffEle,tools.roleDragCan=!1,tools.copydata=function(obj){var ret={};return Object.getOwnPropertyNames(obj).forEach(function(name){ret[name]=obj[name]}),ret},tools.fillArray=function(value,len){for(var arr=[],i=0;i<len;i++)arr.push(value);return arr},tools.speedByAngle=function(angle,XY){if(angle%90!=0&&angle){var speedXY={x:0,y:0};return speedXY.y=XY.y,speedXY.x=speedXY.y/Math.tan(angle*Math.PI/180),speedXY}console.error("计算的角度异常,需要查看：",angle)},tools.speedXYByAngle=function(angle,speed){var speedXY={x:0,y:0};return speedXY.x=speed*Math.cos(angle*Math.PI/180),speedXY.y=speed*Math.sin(angle*Math.PI/180),speedXY},tools.speedLabelByAngle=function(angle,speed,speedBate){var speedXY={x:0,y:0},selfAngle=angle,defaultSpeed=speed,bate=speedBate||1;if(selfAngle%90==0)0===selfAngle||360===selfAngle?speedXY.x=Math.abs(defaultSpeed)*bate:90===selfAngle?speedXY.y=Math.abs(defaultSpeed)*bate:180===selfAngle?speedXY.x=-Math.abs(defaultSpeed)*bate:speedXY.y=-Math.abs(defaultSpeed)*bate;else{var tempXY=tools.speedXYByAngle(selfAngle,defaultSpeed);speedXY.x=tempXY.x,speedXY.y=tempXY.y,speedXY.y=selfAngle>0&&selfAngle<180?Math.abs(speedXY.y)*bate:-Math.abs(speedXY.y)*bate,speedXY.x=selfAngle>90&&selfAngle<270?-Math.abs(speedXY.x)*bate:Math.abs(speedXY.x)*bate}return speedXY},tools.getRad=function(degree){return degree/180*Math.PI},tools.getRoundPos=function(angle,radius,centPos){var center=centPos,hudu=(radius=radius,2*Math.PI/360*angle);return{x:center.x+Math.sin(hudu)*radius,y:center.y-Math.cos(hudu)*radius}},tools.converteNum=function(num){return"number"!=typeof num?(console.warn("要转化的数字并不为number"),num):num<1e3?""+num:num<1e6?(num/1e3).toFixed(1)+"k":num<1e9?(num/1e6).toFixed(1)+"m":""+num}}(tools=exports.tools||(exports.tools={})),exports.default=tools},{}]},{},[2]);